const translations = {
  en: {
    global: {
      'nav.primary': 'Primary',
      'nav.toggle': 'Toggle navigation',
      'nav.home': 'Home',
      'nav.create': 'Excursions',
      'nav.reviews': 'Reviews',
      'nav.story': 'Our Story',
      'footer.rights': 'Beyond the Reef Mexico. All rights reserved.',
      'floatingContact.aria': 'Quick contact options',
      'floatingContact.whatsappAria': 'Chat on WhatsApp',
      'floatingContact.emailAria': 'Email Beyond the Reef Mexico',
      'floatingContact.instagramAria': 'Open Instagram',
      'floatingContact.whatsappLabel': 'WhatsApp',
      'floatingContact.emailLabel': 'Email',
      'floatingContact.instagramLabel': 'Instagram',
      'themeToggle.dark': 'Dark mode',
      'themeToggle.light': 'Light mode',
      'heroSlider.goToSlide': 'Go to slide {{index}}',
      'tourBuilder.remove': 'Remove',
      'inquiry.emailSubject': 'Custom day idea from {{name}}',
      'inquiry.emailBody.nameLabel': 'Name',
      'inquiry.emailBody.emailLabel': 'Email',
      'inquiry.emailBody.phoneLabel': 'Phone',
      'inquiry.emailBody.ideaLabel': 'Trip idea',
      'inquiry.status.missing': 'Please add your name, email, and idea so we can craft your quote.',
      'inquiry.status.sending': 'Sending your request to our concierge team now.',
      'inquiry.status.sent': 'Thanks! Your request is in. We will follow up shortly.',
      'inquiry.status.error': 'Something went wrong sending your request. Please try again.',
      'inquiry.status.unavailable': 'Unable to send your request right now. Please try again shortly.',
      'inquiry.status.missingService': 'Please connect this form to an email service to receive requests.',
      'tour.card.viewDetails': 'View details',
      'tour.card.bookNow': 'Book now',
      'tour.card.privateBadge': 'Private tour',
      'tour.card.halfDay': 'Half day',
      'tour.card.fullDay': 'Full day',
      'tour.card.viewAria': 'View {{name}}'
    },
    home: {
      'page.title': 'Beyond the Reef Mexico',
      'home.hero.aria': 'Featured Experiences',
      'home.hero.heading': 'Pure adrenaline. Untamed nature. Your story in the making.',
      'home.hero.description':
        'Not just a day out - this is freedom unleashed. Swim with turtles, dive into cenotes, race across lagoons, and explore ancient Mayan ruins. No crowds. No limits. Just raw adventure carved into the heart of the Riviera Maya. Your rules. Your pace. Your unforgettable. This isn’t tourism. This is Beyond the Reef.',
      'home.hero.cta': 'See all our private excursions',
      'home.hero.previous': 'Previous slide',
      'home.hero.next': 'Next slide',
      'home.hero.dots': 'Featured slides',
      'home.difference.heading': 'Experience the Difference',
      'home.difference.captured.title': 'Captured',
      'home.difference.captured.copy': 'Complimentary Photography on Every Tour',
      'home.difference.pace.title': 'Set the Pace',
      'home.difference.pace.copy': 'Choose your start time, skip pickups, set your own schedule',
      'home.difference.journey.title': 'Your Journey',
      'home.difference.journey.copy': 'Snorkel, explore, taste, relax - the choice is yours',
      'home.difference.surprises.title': 'No Surprises',
      'home.difference.surprises.copy': 'No hidden costs, No extra charges, Just adventure',
      'home.difference.excellence.title': 'Excellence',
      'home.difference.excellence.copy': 'We don’t claim it - our guests do. Five stars, every time.',
      'home.favorites.heading': 'Adventures Loved by Travelers',
      'home.favorites.copy': 'Swipe through limited-time offers on the tours our guests love the most.',
      'home.favorites.previous': 'Previous tours',
      'home.favorites.next': 'Next tours',
      'home.favorites.card1.tag': 'Top pick',
      'home.favorites.card1.title': 'Swimming with Whale Sharks',
      'home.favorites.card1.badge': '-30%',
      'home.favorites.card1.deal': 'Up to 30% discount',
      'home.favorites.card1.copy':
        'Charter a private boat with marine biologist guides and slip into the water beside gentle giants at sunrise.',
      'home.favorites.card1.cta': 'More information',
      'home.favorites.card2.tag': 'Guest favorite',
      'home.favorites.card2.title': 'The Taco Tour',
      'home.favorites.card2.badge': '-25%',
      'home.favorites.card2.deal': 'Up to 25% discount',
      'home.favorites.card2.copy':
        'Taste your way through hidden taquerías with a local host curating mezcal pairings and street-food legends.',
      'home.favorites.card2.cta': 'More information',
      'home.favorites.card3.tag': 'Limited spots',
      'home.favorites.card3.title': 'El Cielo Cozumel Snorkeling',
      'home.favorites.card3.badge': '-22%',
      'home.favorites.card3.deal': 'Up to 22% discount',
      'home.favorites.card3.copy':
        'Float above starfish gardens and neon reefs in Cozumel with a captain who times the sandbar at its clearest.',
      'home.favorites.card3.cta': 'More information',
      'home.favorites.card4.tag': 'Photo ready',
      'home.favorites.card4.title': 'Tulum Insta Experience',
      'home.favorites.card4.badge': '-18%',
      'home.favorites.card4.deal': 'Up to 18% discount',
      'home.favorites.card4.copy':
        'Capture cinematic shots across Tulum’s ruins and cenotes with a creative director setting the scene for every moment.',
      'home.favorites.card4.cta': 'More information',
      'home.builder.eyebrow': 'Plan with our concierge team',
      'home.builder.heading': 'We build your perfect day',
      'home.builder.copy':
        'Share your idea by email and receive a personalized quote, or book a video call with our team to fine-tune every detail.',
      'home.builder.formAria': 'Send your perfect day details',
      'home.builder.nameLabel': 'Name',
      'home.builder.namePlaceholder': 'Your name',
      'home.builder.emailLabel': 'Email',
      'home.builder.emailPlaceholder': 'you@example.com',
      'home.builder.phoneLabel': 'Phone',
      'home.builder.phonePlaceholder': '+52 1 555 555 5555',
      'home.builder.notesLabel': 'Tell us about your idea',
      'home.builder.notesPlaceholder': 'Include the date, vibe, and any must-do experiences.',
      'home.builder.submit': 'Send my idea',
      'home.builder.listHeading': 'Tell us about your dream day',
      'home.builder.pointOne': 'Share the vibe you want: relaxed, high-energy, romantic, or off-grid.',
      'home.builder.pointTwo': 'Add any must-do activities, dining styles, or timing preferences.',
      'home.builder.pointThree':
        'You’ll receive a personalized quote or the option to connect with our team by video call.',
      'home.builder.emailFallback':
        'Prefer email? Reach us directly at <a href="mailto:info@beyondthereefmexico.com">info@beyondthereefmexico.com</a>.',
      'home.builder.emailSubject': 'Custom day idea from {{name}}',
      'home.builder.status.missing': 'Please add your name, email, and idea so we can craft your quote.',
      'home.builder.status.prompt': 'Opening your email app to send the details to our concierge.',
      'home.accent.eyebrow': 'Why travelers love us',
      'home.accent.heading': 'Private, Stress-Free Excursions',
      'home.accent.locals.title': 'Led by certified guides',
      'home.accent.locals.copy':
        'Our certified guides bring years of professional experience, crafting insider-only moments you cannot find on a brochure.',
      'home.accent.collab.title': 'Can’t find the tour you want?',
      'home.accent.collab.copy':
        'Reach out and we’ll schedule a call or video chat to custom-build your perfect excursions.',
      'home.accent.execution.title': 'Worry-free tours',
      'home.accent.execution.copy':
        'Your tour, your time, no hidden fees, with transfers, tickets, and timing handled so you just enjoy.',
      'home.cta.heading': 'Ready to build your dream tour?',
      'home.cta.copy': 'Reach out and we’ll design the right experience for you.',
      'home.cta.button': 'Email us now'
    },
    tours: {
      'page.title': 'Excursions & Private Tours | Beyond the Reef Mexico',
      'tours.hero.aria': 'Excursion highlight reel',
      'tours.hero.previous': 'Previous slide',
      'tours.hero.next': 'Next slide',
      'tours.hero.dots': 'Excursion slides',
      'tours.hero.eyebrow': 'Build your tour',
      'tours.hero.heading': 'Design experiences as unique as your crew',
      'tours.hero.copy':
        'Drag and drop curated activities, refine pacing, and invite your travel companions to collaborate in real time.',
      'tours.assurance.eyebrow': 'Only you and the people you care',
      'tours.assurance.heading': 'With more than 14 years of experience in tours',
      'tours.assurance.copy':
        '<span class="assurance-line">Newest vans in the industry</span><span class="assurance-line">Certified guides</span><span class="assurance-line">Safe meals tailored to allergies and special diets</span>',
      'tours.assurance.item1.title': 'Private fleet & modern vans',
      'tours.assurance.item1.copy': 'Ride in our newest vans with cold A/C, leather seating, pro captains, and zero shared groups.',
      'tours.assurance.item2.title': 'Certified, professional guides',
      'tours.assurance.item2.copy': 'Licensed, bilingual guides lead every tour with safety-first protocols and insider knowledge.',
      'tours.assurance.item3.title': 'Safe food for every diet',
      'tours.assurance.item3.copy': 'We include fresh, safe food and adapt menus for vegan, gluten-free, allergies, and special requests.',
      'tours.grid.eyebrow': 'See every tour fast',
      'tours.grid.heading': 'Our most popular private excursions',
      'tours.grid.custom.title': 'Custom combinations',
      'tours.grid.custom.copy':
        'Mix scuba dives, culinary surprises, and remote hikes across islands. Our smart planner orchestrates logistics so you can focus on the fun.',
      'tours.grid.pacing.title': 'Smart pacing',
      'tours.grid.pacing.copy':
        'We balance high-energy adventures with restorative interludes, ensuring every guest has time to recharge.',
      'tours.grid.collab.title': 'Co-create instantly',
      'tours.grid.collab.copy':
        'Share a private link so your crew can vote, comment, or add new ideas. Our concierges can jump in live to fine-tune.',
      'tours.steps.heading': 'How the custom builder works',
      'tours.steps.one.title': 'Tell us about your dream',
      'tours.steps.one.copy': 'Answer a few questions or import a mood board. We use your vibe to pre-select experiences.',
      'tours.steps.two.title': 'Remix the plan',
      'tours.steps.two.copy':
        'Drag items between days, adjust timing, and add bespoke requests like photographers or private chefs.',
      'tours.steps.three.title': 'Lock it in',
      'tours.steps.three.copy':
        'Collaborate with your concierge to finalize transfers, payments, and on-island support.',
      'tours.contact.eyebrow': 'Your custom tour',
      'tours.contact.heading': 'Want a tour that isn’t on the list?',
      'tours.contact.copy':
        'Tell us the date and any special diets or accessibility needs—we’ll design it, price it, and confirm fast.',
      'tours.contact.point1': 'Bundle promo: book 3 tours and save 20% to 30%.',
      'tours.contact.point2': 'Private-only service with new vans, pro captains, and certified guides.',
      'tours.contact.point3': 'Safe food standards with menus adapted for vegan, gluten-free, and allergy requests.',
      'tours.contact.channels':
        'Prefer direct contact? Email <a href="mailto:info@beyondthereefmexico.com">info@beyondthereefmexico.com</a> or WhatsApp <a href="https://wa.me/529841670697" target="_blank" rel="noopener noreferrer">+52 984 167 0697</a>.',
      'tours.contact.formAria': 'Share the tour you want',
      'tours.contact.nameLabel': 'Name',
      'tours.contact.namePlaceholder': 'Your name',
      'tours.contact.emailLabel': 'Email',
      'tours.contact.emailPlaceholder': 'you@example.com',
      'tours.contact.phoneLabel': 'Phone',
      'tours.contact.phonePlaceholder': '+52 1 555 555 5555',
      'tours.contact.ideaLabel': 'Tell us about your idea',
      'tours.contact.ideaPlaceholder': 'Include the date, vibe, diet needs, and any must-do experiences.',
      'tours.contact.submit': 'Send my idea'
    },
    reviews: {
      'page.title': 'Guest Reviews | Beyond the Reef Mexico',
      'reviews.hero.eyebrow': 'Guest love letters',
      'reviews.hero.heading': 'Stories from travelers who went beyond',
      'reviews.hero.copy':
        'Hear how custom-crafted journeys and thoughtful touches turned bucket-list dreams into effortless escapes.',
      'reviews.featured.heading': 'Featured reviews',
      'reviews.featured.one.title': '“They thought of every detail.”',
      'reviews.featured.one.copy':
        '“From the midnight manta ray swim to the surprise anniversary dinner on a sandbar, the Beyond the Reef team went above and beyond. We never looked at our watches once.” - <strong>Cam &amp; Jordan</strong>',
      'reviews.featured.two.title': '“Planning was actually fun.”',
      'reviews.featured.two.copy':
        '“We built the itinerary together during a video call and could see availability update live. Their concierge secured a private guide for my dad so he could explore at his own pace.” - <strong>Riya</strong>',
      'reviews.featured.three.title': '“Our friends are still raving.”',
      'reviews.featured.three.copy':
        '“The group chat was blowing up with ideas. The Beyond the Reef planner kept everything organized and even added mixology classes based on our Spotify playlist.” - <strong>Diego &amp; crew</strong>',
      'reviews.featured.four.title': '“Chichén Itzá made easy.”',
      'reviews.featured.four.copy':
        '“They arranged a sunrise entry so we had El Castillo almost to ourselves, plus a history-loving guide who knew every story. Breakfast tacos afterward were the best.” - <strong>Mariela &amp; Tomás</strong>',
      'reviews.featured.five.title': '“Fishing with family felt effortless.”',
      'reviews.featured.five.copy':
        '“Beyond the Reef stocked the cooler, handled the licenses, and matched us with a patient captain so our kids could reel in their first mahi. Zero stress, just smiles.” - <strong>The Greene crew</strong>',
      'reviews.featured.six.title': '“Street taco crawl perfection.”',
      'reviews.featured.six.copy':
        '“We ate our way through downtown—pastor, cochinita, birria—and never waited in line. Our host knew the vendors by name and even got my vegan friend amazing options.” - <strong>Avery</strong>',
      'reviews.featured.seven.title': '“Cenote swim with no crowds.”',
      'reviews.featured.seven.copy':
        '“They found a hidden cenote and timed our arrival between buses. We floated in crystal water with just birds overhead. Towels, snacks, and photos were all handled.” - <strong>Jess &amp; Priya</strong>',
      'reviews.featured.eight.title': '“Snorkeling that felt like a documentary.”',
      'reviews.featured.eight.copy':
        '“Our guide pointed out turtles, rays, and even a shy seahorse. Gear fit perfectly and the boat had shade, which my dad appreciated. We felt cared for start to finish.” - <strong>Samir</strong>',
      'reviews.featured.nine.title': '“Romantic taco night on the beach.”',
      'reviews.featured.nine.copy':
        '“They turned a simple craving into a whole evening: chef-grilled tacos, aguas frescas, and fairy lights under the palms. It was our favorite date of the trip.” - <strong>Lena &amp; Marco</strong>',
      'reviews.featured.ten.title': '“Accessible adventure done right.”',
      'reviews.featured.ten.copy':
        '“I use a wheelchair, and they coordinated ramps, transport, and a calm guide for exploring Tulum. I never had to explain twice—everything just worked.” - <strong>Natalie</strong>',
      'reviews.featured.eleven.title': '“Spearfishing lessons that felt personal.”',
      'reviews.featured.eleven.copy':
        '“We wanted to learn safely, and they paired us with a local expert who focused on technique and reef respect. We left with new skills and a grilled catch lunch.” - <strong>Darius &amp; Cole</strong>',
      'reviews.featured.twelve.title': '“Kids loved the lagoon night tour.”',
      'reviews.featured.twelve.copy':
        '“Bioluminescence, storytelling, and hot chocolate on deck—every detail was thought through. Even our teenager put the phone away to watch the stars.” - <strong>Ruth &amp; family</strong>',
      'reviews.featured.thirteen.title': '“Foodie day from market to mezcal.”',
      'reviews.featured.thirteen.copy':
        '“We started at the local market for spices, took a cooking class, and ended with a mezcal tasting led by a maestro. It felt authentic, not touristy.” - <strong>Eduardo</strong>',
      'reviews.share.heading': 'Share your experience',
      'reviews.share.copy':
        'Email <a href="mailto:info@beyondthereefmexico.com">info@beyondthereefmexico.com</a> with a highlight reel or tag us on social with <strong>#BeyondTheReef</strong> for a chance to be featured.'
    },
    story: {
      'page.title': 'Our Story | Beyond the Reef Mexico',
      'story.hero.eyebrow': 'Our story',
      'story.hero.heading': 'Born from a love of the sea and storytelling',
      'story.hero.copy':
        'Every experience is thoughtfully designed to feel personal, seamless, and genuinely human.',
      'story.intro.heading': 'Beyond The Reef Mexico',
      'story.intro.p1':
        'Our company was born from a simple realization: travel experiences had become rushed, impersonal, and disconnected.',
      'story.intro.p2': 'We knew there had to be a better way.',
      'story.intro.p3':
        'Instead of crowded buses, shared pickups that steal hours of your vacation, and scripted tours, we chose a different path: one built around time, comfort, and real human connection.',
      'story.intro.p4':
        'Every experience we offer is thoughtfully designed around you. No shared transportation. No long detours. No compromises. From private transfers to carefully selected local guides, every detail exists to create a smooth, meaningful, and unforgettable day.',
      'story.intro.p5':
        'Our guides are not just employees; they are passionate professionals who are paid well, respected, and proud of the work they do. That pride translates directly into the energy, care, and authenticity you feel throughout your experience.',
      'story.intro.p6':
        'We believe the best moments happen when people feel relaxed, heard, and genuinely connected. That belief shapes everything we do from how we plan our tours to how we treat our guests and our team.',
      'story.intro.p7':
        'If an experience does not meet your expectations, we make it right. Because trust, integrity, and human connection matter more than volume.',
      'story.intro.p8': 'This is not mass tourism. This is travel done with intention.',
      'story.values.connection.title': 'Real connections',
      'story.values.connection.copy':
        'We build every experience around genuine human connection so guests feel welcomed, understood, and part of the places they visit.',
      'story.values.wages.title': 'All guides make living wages',
      'story.values.wages.copy':
        'Our guides earn strong, reliable incomes with respect and stability, allowing them to focus fully on delivering exceptional hospitality.',
      'story.values.awareness.title': 'Social awareness',
      'story.values.awareness.copy':
        'We act with empathy and cultural sensitivity, partnering with local communities to ensure tourism benefits everyone involved.',
      'story.crew.heading': 'Meet the crew',
      'story.crew.lila.title': 'Lila Reyes - Founder',
      'story.crew.lila.copy':
        'A marine biologist turned travel designer, Lila launched Beyond the Reef to share hidden reefs and island communities with respectful explorers.',
      'story.crew.makai.title': 'Makai Thompson - Experience Architect',
      'story.crew.makai.copy':
        'Raised between three islands, Makai weaves cultural rituals, local artisans, and signature flavors into each itinerary.',
      'story.crew.sami.title': 'Sami Chen - Technology Lead',
      'story.crew.sami.copy':
        'Sami built our collaborative planning platform with real-time availability checks and concierge messaging that feels like texting a friend.',
      'story.values.heading': 'What we stand for',
      'story.values.regen.title': 'Regenerative travel',
      'story.values.regen.copy':
        'We partner with community-led conservation projects and donate a portion of every itinerary to reef restoration.',
      'story.values.hospitality.title': 'Hospitality with heart',
      'story.values.hospitality.copy':
        'Your hosts welcome you like family, preparing meaningful surprises and thoughtful touches along the way.',
      'story.values.tech.title': 'Technology that disappears',
      'story.values.tech.copy':
        'The planning tools are powerful, yet effortless, so you stay focused on excitement rather than logistics.'
    },
    'tour-detail': {
      'page.title': 'Beyond the Reef Mexico | Tour Details',
      'tour.hero.aria': 'Tour overview',
      'tour.hero.eyebrow': 'Adventures Loved by Travelers',
      'tour.gallery.previous': 'Previous photo',
      'tour.gallery.next': 'Next photo',
      'tour.details.heading': 'Plan every detail with confidence',
      'tour.details.copy': 'Everything you need to know before you reserve.',
      'tour.details.about': 'About this experience',
      'tour.details.includes': "What's included",
      'tour.booking.label': 'Reserve now',
      'tour.booking.from': 'From',
      'tour.booking.currency': 'USD',
      'tour.booking.perPerson': 'per person',
      'tour.booking.helper': 'Prices drop as you add more people.',
      'tour.booking.guestsLabel': 'How many people?',
      'tour.booking.nameLabel': 'Name',
      'tour.booking.namePlaceholder': 'Your full name',
      'tour.booking.emailLabel': 'Email',
      'tour.booking.emailPlaceholder': 'you@email.com',
      'tour.booking.phoneLabel': 'Phone number',
      'tour.booking.phonePlaceholder': '+52 984 167 0697',
      'tour.booking.datetimeLabel': 'Date & time of the activity',
      'tour.booking.datetimeUnknown': 'Not sure yet',
      'tour.booking.pickupLabel': 'Pick-up location',
      'tour.booking.pickupPlaceholder': 'Hotel or meeting point',
      'tour.booking.submit': 'Book now',
      'tour.booking.note': 'No payment collected here - we confirm availability and follow up right away.',
      'tour.booking.disclaimer': 'Prices and promotional offers are subject to change without prior notice.',
      'tour.booking.status.hold': 'Holding {{guests}} spot(s) for {{tour}}. We will confirm pick-up at {{pickup}} right away.',
      'tour.booking.status.missingService': 'Please connect the booking form to your email service to receive requests.',
      'tour.booking.status.sent': 'Request sent! We will confirm availability and follow up right away.',
      'tour.booking.status.error': 'Something went wrong sending your request. Please try again shortly.',
      'tour.booking.status.unavailable': 'Unable to send your request right now. Please try again shortly.',
      'tour.booking.pickupFallback': 'your location',
      'tour.booking.datetimeFallback': 'Not provided',
      'tour.related.aria': 'Other adventures',
      'tour.related.heading': 'Keep exploring',
      'tour.related.copy': 'Travelers also loved these journeys.',
      'tour.related.previous': 'Previous tours',
      'tour.related.next': 'Next tours'
    }
  },
  es: {
    global: {
      'nav.primary': 'Principal',
      'nav.toggle': 'Mostrar u ocultar la navegación',
      'nav.home': 'Inicio',
      'nav.create': 'Excursiones',
      'nav.reviews': 'Reseñas',
      'nav.story': 'Nuestra historia',
      'footer.rights': 'Beyond the Reef Mexico. Todos los derechos reservados.',
      'floatingContact.aria': 'Opciones de contacto rápido',
      'floatingContact.whatsappAria': 'Chatear en WhatsApp',
      'floatingContact.emailAria': 'Enviar correo a Beyond the Reef Mexico',
      'floatingContact.instagramAria': 'Abrir Instagram',
      'floatingContact.whatsappLabel': 'WhatsApp',
      'floatingContact.emailLabel': 'Correo',
      'floatingContact.instagramLabel': 'Instagram',
      'themeToggle.dark': 'Modo oscuro',
      'themeToggle.light': 'Modo claro',
      'heroSlider.goToSlide': 'Ir a la diapositiva {{index}}',
      'tourBuilder.remove': 'Eliminar',
      'inquiry.emailSubject': 'Idea de día personalizado de {{name}}',
      'inquiry.emailBody.nameLabel': 'Nombre',
      'inquiry.emailBody.emailLabel': 'Correo',
      'inquiry.emailBody.phoneLabel': 'Teléfono',
      'inquiry.emailBody.ideaLabel': 'Idea del viaje',
      'inquiry.status.missing': 'Por favor agrega tu nombre, correo e idea para crear tu cotización.',
      'inquiry.status.sending': 'Enviando tu solicitud al equipo concierge.',
      'inquiry.status.sent': '¡Gracias! Recibimos tu solicitud y responderemos pronto.',
      'inquiry.status.error': 'Ocurrió un error al enviar tu solicitud. Intenta de nuevo.',
      'inquiry.status.unavailable': 'No pudimos enviar tu solicitud. Intenta de nuevo en unos minutos.',
      'inquiry.status.missingService': 'Conecta este formulario a un servicio de correo para recibir solicitudes.',
      'tour.card.viewDetails': 'Ver detalles',
      'tour.card.bookNow': 'Reservar ahora',
      'tour.card.privateBadge': 'Tour privado',
      'tour.card.halfDay': 'Medio día',
      'tour.card.fullDay': 'Día completo',
      'tour.card.viewAria': 'Ver {{name}}'
    },
    home: {
      'page.title': 'Beyond the Reef Mexico',
      'home.hero.aria': 'Experiencias destacadas',
      'home.hero.heading': 'Pura adrenalina. Naturaleza indómita. Tu historia en marcha.',
      'home.hero.description':
        'No es solo una excursión: es libertad desatada. Nada con tortugas, sumérgete en cenotes, cruza lagunas a toda velocidad y explora antiguas ruinas mayas. Sin multitudes. Sin límites. Solo aventura pura en el corazón de la Riviera Maya. Tus reglas. Tu ritmo. Tu recuerdo inolvidable. Esto no es turismo. Esto es Beyond the Reef.',
      'home.hero.cta': 'Ver todas nuestras excursiones privadas',
      'home.hero.previous': 'Diapositiva anterior',
      'home.hero.next': 'Siguiente diapositiva',
      'home.hero.dots': 'Diapositivas destacadas',
      'home.difference.heading': 'Vive la diferencia',
      'home.difference.captured.title': 'Capturado',
      'home.difference.captured.copy': 'Fotografía incluida en cada tour',
      'home.difference.pace.title': 'Marca el ritmo',
      'home.difference.pace.copy': 'Elige tu horario, evita traslados y diseña tu propio itinerario',
      'home.difference.journey.title': 'Tu travesía',
      'home.difference.journey.copy': 'Snorkel, explorar, saborear o relajarte: tú decides',
      'home.difference.surprises.title': 'Sin sorpresas',
      'home.difference.surprises.copy': 'Sin costos ocultos, sin cargos extra, solo aventura',
      'home.difference.excellence.title': 'Excelencia',
      'home.difference.excellence.copy': 'No lo decimos nosotros: lo dicen nuestros huéspedes. Cinco estrellas siempre.',
      'home.favorites.heading': 'Aventuras que enamoran a los viajeros',
      'home.favorites.copy': 'Desliza para conocer las ofertas limitadas de los tours que más enamoran a nuestros viajeros.',
      'home.favorites.previous': 'Tours anteriores',
      'home.favorites.next': 'Más tours',
      'home.favorites.card1.tag': 'Imprescindible',
      'home.favorites.card1.title': 'Nado con tiburón ballena',
      'home.favorites.card1.badge': '-30%',
      'home.favorites.card1.deal': 'Hasta 30% de descuento',
      'home.favorites.card1.copy':
        'Alquila un barco privado con guías biólogos marinos y nada junto a estos gigantes pacíficos al amanecer.',
      'home.favorites.card1.cta': 'Más información',
      'home.favorites.card2.tag': 'Favorito de los huéspedes',
      'home.favorites.card2.title': 'El Taco Tour',
      'home.favorites.card2.badge': '-25%',
      'home.favorites.card2.deal': 'Hasta 25% de descuento',
      'home.favorites.card2.copy':
        'Saborea taquerías ocultas con un anfitrión local que marida mezcales y comparte leyendas callejeras.',
      'home.favorites.card2.cta': 'Más información',
      'home.favorites.card3.tag': 'Cupos limitados',
      'home.favorites.card3.title': 'Snorkel en El Cielo Cozumel',
      'home.favorites.card3.badge': '-22%',
      'home.favorites.card3.deal': 'Hasta 22% de descuento',
      'home.favorites.card3.copy':
        'Flota sobre jardines de estrellas de mar y arrecifes neón en Cozumel con un capitán que elige el banco de arena en su punto más claro.',
      'home.favorites.card3.cta': 'Más información',
      'home.favorites.card4.tag': 'Listo para fotos',
      'home.favorites.card4.title': 'Experiencia Insta en Tulum',
      'home.favorites.card4.badge': '-18%',
      'home.favorites.card4.deal': 'Hasta 18% de descuento',
      'home.favorites.card4.copy':
        'Captura tomas cinematográficas en las ruinas y cenotes de Tulum con un director creativo preparando cada escena.',
      'home.favorites.card4.cta': 'Más información',
      'home.builder.eyebrow': 'Planifica con nuestro equipo concierge',
      'home.builder.heading': 'Creamos tu día perfecto',
      'home.builder.copy':
        'Envíanos tu idea y te responderemos con una cotización personalizada de tu día, o agenda una videollamada con nuestro equipo concierge para pulir cada detalle.',
      'home.builder.formAria': 'Envía los detalles de tu día perfecto',
      'home.builder.nameLabel': 'Nombre',
      'home.builder.namePlaceholder': 'Tu nombre',
      'home.builder.emailLabel': 'Correo electrónico',
      'home.builder.emailPlaceholder': 'tu@correo.com',
      'home.builder.phoneLabel': 'Teléfono',
      'home.builder.phonePlaceholder': '+52 1 555 555 5555',
      'home.builder.notesLabel': 'Cuéntanos tu idea',
      'home.builder.notesPlaceholder': 'Incluye la fecha, el ambiente y las experiencias imperdibles.',
      'home.builder.submit': 'Enviar mi idea',
      'home.builder.listHeading': 'Cuéntanos sobre tu día soñado',
      'home.builder.pointOne': 'Comparte el ambiente que buscas: relajado, con adrenalina, romántico o fuera de lo común.',
      'home.builder.pointTwo': 'Agrega actividades imprescindibles, estilo de comida o preferencias de horario.',
      'home.builder.pointThree': 'Te responderemos con una cotización a medida o agendaremos una videollamada con nuestro equipo concierge.',
      'home.builder.emailFallback':
        '¿Prefieres correo? Escríbenos a <a href="mailto:info@beyondthereefmexico.com">info@beyondthereefmexico.com</a>.',
      'home.builder.emailSubject': 'Idea de día personalizado de {{name}}',
      'home.builder.status.missing': 'Por favor agrega tu nombre, correo e idea para crear tu cotización.',
      'home.builder.status.prompt': 'Abriendo tu app de correo para enviar los detalles a nuestro concierge.',
      'home.accent.eyebrow': 'Por qué nos aman los viajeros',
      'home.accent.heading': 'Atención concierge VIP para la excursión inolvidable de tu familia',
      'home.accent.locals.title': 'Guiado por guías certificados',
      'home.accent.locals.copy':
        'Nuestros guías certificados tienen años de experiencia profesional y organizan momentos únicos que no encontrarás en un folleto.',
      'home.accent.collab.title': '¿No encuentras el tour ideal?',
      'home.accent.collab.copy':
        'Escríbenos y agendamos una llamada o videollamada para crear tus vacaciones perfectas a la medida.',
      'home.accent.execution.title': 'Tours sin preocupaciones',
      'home.accent.execution.copy':
        'Tu tour, tu horario, sin cargos ocultos: coordinamos traslados, boletos y tiempos para que solo disfrutes.',
      'home.cta.heading': '¿Listo para diseñar tu tour soñado?',
      'home.cta.copy': 'Escríbele a nuestro equipo de concierge y te enviaremos una propuesta personalizada en 24 horas.',
      'home.cta.button': 'Escríbenos'
    },
    tours: {
      'page.title': 'Excursiones y Tours Privados | Beyond the Reef Mexico',
      'tours.hero.aria': 'Reel de excursiones destacadas',
      'tours.hero.previous': 'Diapositiva anterior',
      'tours.hero.next': 'Siguiente diapositiva',
      'tours.hero.dots': 'Diapositivas de excursiones',
      'tours.hero.eyebrow': 'Diseña tu tour',
      'tours.hero.heading': 'Crea experiencias tan únicas como tu grupo',
      'tours.hero.copy':
        'Arrastra actividades seleccionadas, ajusta el ritmo e invita a tus acompañantes a colaborar en tiempo real.',
      'tours.assurance.eyebrow': 'Solo tú y las personas que quieres',
      'tours.assurance.heading': 'Más de 14 años de experiencia en tours',
      'tours.assurance.copy':
        '<span class="assurance-line">Las vans más nuevas de la industria</span><span class="assurance-line">Guías certificados</span><span class="assurance-line">Comidas seguras para alergias y dietas especiales</span>',
      'tours.assurance.item1.title': 'Flota privada y vans modernas',
      'tours.assurance.item1.copy':
        'Viaja en nuestras vans más nuevas con A/C frío, asientos de piel, capitanes expertos y cero grupos compartidos.',
      'tours.assurance.item2.title': 'Guías certificados y profesionales',
      'tours.assurance.item2.copy':
        'Guías bilingües con licencia lideran cada tour con protocolos de seguridad e información local.',
      'tours.assurance.item3.title': 'Comida segura para cada dieta',
      'tours.assurance.item3.copy':
        'Incluimos alimentos frescos y adaptamos menús para veganos, gluten free, alergias y peticiones especiales.',
      'tours.grid.eyebrow': 'Ve cada tour rápido',
      'tours.grid.heading': 'Nuestras excursiones privadas más populares',
      'tours.grid.custom.title': 'Combinaciones a medida',
      'tours.grid.custom.copy':
        'Mezcla buceo, sorpresas culinarias y caminatas remotas. Nuestro planificador inteligente coordina la logística para que solo te concentres en disfrutar.',
      'tours.grid.pacing.title': 'Ritmo inteligente',
      'tours.grid.pacing.copy':
        'Equilibramos aventuras llenas de energía con momentos de descanso para que todos recarguen energías.',
      'tours.grid.collab.title': 'Co-creación al instante',
      'tours.grid.collab.copy':
        'Comparte un enlace privado para que tu equipo vote, comente o agregue nuevas ideas. Nuestros concierges pueden sumarse en vivo para ajustarlo.',
      'tours.steps.heading': 'Cómo funciona el constructor personalizado',
      'tours.steps.one.title': 'Cuéntanos tu sueño',
      'tours.steps.one.copy': 'Responde algunas preguntas o comparte un mood board. Usamos tu estilo para preseleccionar experiencias.',
      'tours.steps.two.title': 'Reinventa el plan',
      'tours.steps.two.copy':
        'Reordena actividades por día, ajusta horarios y agrega peticiones especiales como fotógrafos o chefs privados.',
      'tours.steps.three.title': 'Confírmalo todo',
      'tours.steps.three.copy':
        'Colabora con tu concierge para definir traslados, pagos y asistencia en destino.',
      'tours.contact.eyebrow': 'Tu tour personalizado',
      'tours.contact.heading': '¿Quieres un tour que no está en la lista?',
      'tours.contact.copy':
        'Cuéntanos la fecha y cualquier dieta especial o necesidad de accesibilidad: lo diseñamos, cotizamos y confirmamos rápido.',
      'tours.contact.point1': 'Promo paquete: reserva 3 tours y ahorra de 20% a 30%.',
      'tours.contact.point2': 'Servicio 100% privado con vans nuevas, capitanes expertos y guías certificados.',
      'tours.contact.point3': 'Estándares de comida segura con menús adaptados para veganos, gluten free y alergias.',
      'tours.contact.channels':
        '¿Prefieres contacto directo? Escribe a <a href="mailto:info@beyondthereefmexico.com">info@beyondthereefmexico.com</a> o WhatsApp <a href="https://wa.me/529841670697" target="_blank" rel="noopener noreferrer">+52 984 167 0697</a>.',
      'tours.contact.formAria': 'Comparte el tour que quieres',
      'tours.contact.nameLabel': 'Nombre',
      'tours.contact.namePlaceholder': 'Tu nombre',
      'tours.contact.emailLabel': 'Correo electrónico',
      'tours.contact.emailPlaceholder': 'tu@correo.com',
      'tours.contact.phoneLabel': 'Teléfono',
      'tours.contact.phonePlaceholder': '+52 1 555 555 5555',
      'tours.contact.ideaLabel': 'Cuéntanos tu idea',
      'tours.contact.ideaPlaceholder': 'Incluye la fecha, el ambiente, dietas y experiencias imperdibles.',
      'tours.contact.submit': 'Enviar mi idea'
    },
    reviews: {
      'page.title': 'Reseñas de huéspedes | Beyond the Reef Mexico',
      'reviews.hero.eyebrow': 'Cartas de amor de nuestros huéspedes',
      'reviews.hero.heading': 'Historias de viajeros que fueron más allá',
      'reviews.hero.copy':
        'Descubre cómo los viajes personalizados y los detalles cuidadosos convirtieron sueños en escapadas sin esfuerzo.',
      'reviews.featured.heading': 'Reseñas destacadas',
      'reviews.featured.one.title': '“Pensaron en cada detalle.”',
      'reviews.featured.one.copy':
        '“Desde el nado nocturno con mantarrayas hasta la cena sorpresa de aniversario en un banco de arena, el equipo de Beyond the Reef superó todas las expectativas. No miramos el reloj ni una sola vez.” - <strong>Cam &amp; Jordan</strong>',
      'reviews.featured.two.title': '“Planear fue realmente divertido.”',
      'reviews.featured.two.copy':
        '“Construimos el itinerario juntos durante una videollamada y veíamos la disponibilidad en vivo. Su concierge consiguió un guía privado para mi papá para que explorara a su propio ritmo.” - <strong>Riya</strong>',
      'reviews.featured.three.title': '“Nuestros amigos siguen hablando del viaje.”',
      'reviews.featured.three.copy':
        '“El chat del grupo no dejaba de llenarse de ideas. El planificador de Beyond the Reef mantuvo todo organizado e incluso añadió clases de mixología inspiradas en nuestra lista de Spotify.” - <strong>Diego &amp; crew</strong>',
      'reviews.featured.four.title': '“Chichén Itzá sin complicaciones.”',
      'reviews.featured.four.copy':
        '“Organizaron la entrada al amanecer para tener El Castillo casi para nosotros, con un guía amante de la historia que conocía cada relato. Los tacos del desayuno fueron lo máximo.” - <strong>Mariela &amp; Tomás</strong>',
      'reviews.featured.five.title': '“Pescar en familia fue facilísimo.”',
      'reviews.featured.five.copy':
        '“Beyond the Reef llenó la hielera, gestionó licencias y nos asignó un capitán paciente para que nuestros niños pescaran su primer mahi. Cero estrés, pura sonrisa.” - <strong>The Greene crew</strong>',
      'reviews.featured.six.title': '“Ruta de tacos callejeros perfecta.”',
      'reviews.featured.six.copy':
        '“Comimos en el centro: pastor, cochinita, birria, y nunca hicimos fila. Nuestro anfitrión conocía a los vendedores por nombre y consiguió opciones increíbles para mi amiga vegana.” - <strong>Avery</strong>',
      'reviews.featured.seven.title': '“Cenote sin multitudes.”',
      'reviews.featured.seven.copy':
        '“Encontraron un cenote escondido y coordinaron la llegada entre los autobuses. Flotamos en agua cristalina con solo aves de fondo. Toallas, snacks y fotos estuvieron resueltos.” - <strong>Jess &amp; Priya</strong>',
      'reviews.featured.eight.title': '“Snorkel de documental.”',
      'reviews.featured.eight.copy':
        '“Nuestro guía señaló tortugas, rayas y hasta un caballito de mar tímido. El equipo quedó perfecto y el barco tenía sombra, algo que mi papá agradeció. Nos cuidaron de inicio a fin.” - <strong>Samir</strong>',
      'reviews.featured.nine.title': '“Noche romántica de tacos en la playa.”',
      'reviews.featured.nine.copy':
        '“Convirtieron un antojo en una noche completa: tacos a la parrilla, aguas frescas y luces bajo las palmas. Fue nuestra cita favorita del viaje.” - <strong>Lena &amp; Marco</strong>',
      'reviews.featured.ten.title': '“Aventura accesible, bien hecha.”',
      'reviews.featured.ten.copy':
        '“Uso silla de ruedas y coordinaron rampas, transporte y un guía tranquilo para recorrer Tulum. Nunca tuve que explicar dos veces; todo funcionó.” - <strong>Natalie</strong>',
      'reviews.featured.eleven.title': '“Clases de pesca submarina muy personales.”',
      'reviews.featured.eleven.copy':
        '“Queríamos aprender con seguridad y nos asignaron un experto local enfocado en técnica y respeto al arrecife. Nos fuimos con nuevas habilidades y un almuerzo con la pesca del día.” - <strong>Darius &amp; Cole</strong>',
      'reviews.featured.twelve.title': '“A los niños les encantó el tour nocturno en la laguna.”',
      'reviews.featured.twelve.copy':
        '“Bioluminiscencia, historias y chocolate caliente en cubierta: cada detalle estuvo pensado. Hasta nuestro adolescente guardó el celular para ver las estrellas.” - <strong>Ruth &amp; family</strong>',
      'reviews.featured.thirteen.title': '“Día foodie del mercado al mezcal.”',
      'reviews.featured.thirteen.copy':
        '“Empezamos en el mercado local por especias, tomamos una clase de cocina y cerramos con una cata de mezcal con un maestro. Se sintió auténtico, nada turístico.” - <strong>Eduardo</strong>',
      'reviews.share.heading': 'Comparte tu experiencia',
      'reviews.share.copy':
        'Escríbenos a <a href="mailto:info@beyondthereefmexico.com">info@beyondthereefmexico.com</a> con los mejores momentos o etiquétanos en redes con <strong>#BeyondTheReef</strong> para tener la oportunidad de aparecer.'
    },
    story: {
      'page.title': 'Nuestra historia | Beyond the Reef Mexico',
      'story.hero.eyebrow': 'Nuestra historia',
      'story.hero.heading': 'Nacimos del amor por el mar y por contar historias',
      'story.hero.copy':
        'Creemos que cada viajero merece una narrativa a la medida, creada por nuestro equipo, impulsada por la tecnología e impregnada de hospitalidad genuina.',
      'story.intro.heading': 'Beyond The Reef Mexico',
      'story.intro.p1':
        'Nuestra empresa nació de una simple realización: las experiencias de viaje se habían vuelto apresuradas, impersonales y desconectadas.',
      'story.intro.p2': 'Sabíamos que debía existir una mejor forma.',
      'story.intro.p3':
        'En lugar de autobuses llenos, recogidas compartidas que roban horas de tus vacaciones y tours guionados, elegimos un camino diferente: uno construido sobre el tiempo, la comodidad y la conexión humana real.',
      'story.intro.p4':
        'Cada experiencia que ofrecemos está pensada en ti. Sin transporte compartido. Sin desvíos largos. Sin concesiones. Desde traslados privados hasta guías locales cuidadosamente seleccionados, cada detalle existe para crear un día fluido, significativo e inolvidable.',
      'story.intro.p5':
        'Nuestros guías no son solo empleados; son profesionales apasionados, bien remunerados, respetados y orgullosos de su trabajo. Ese orgullo se refleja en la energía, el cuidado y la autenticidad que se siente durante tu experiencia.',
      'story.intro.p6':
        'Creemos que los mejores momentos suceden cuando las personas se sienten relajadas, escuchadas y verdaderamente conectadas. Esa creencia guía todo lo que hacemos, desde cómo planeamos los tours hasta cómo tratamos a nuestros huéspedes y a nuestro equipo.',
      'story.intro.p7':
        'Si una experiencia no cumple tus expectativas, lo resolvemos. Porque la confianza, la integridad y la conexión humana importan más que el volumen.',
      'story.intro.p8': 'Esto no es turismo masivo. Esto es viajar con intención.',
      'story.values.connection.title': 'Conexiones reales',
      'story.values.connection.copy':
        'Diseñamos cada experiencia alrededor de la conexión humana genuina para que nuestros huéspedes se sientan bienvenidos, comprendidos y parte de los lugares que visitan.',
      'story.values.wages.title': 'Guías con salarios dignos',
      'story.values.wages.copy':
        'Nuestros guías reciben ingresos sólidos y estables con respeto y estabilidad, para enfocarse por completo en una hospitalidad excepcional.',
      'story.values.awareness.title': 'Conciencia social',
      'story.values.awareness.copy':
        'Actuamos con empatía y sensibilidad cultural, colaborando con comunidades locales para que el turismo beneficie a todos.',
      'story.crew.heading': 'Conoce a la tripulación',
      'story.crew.lila.title': 'Lila Reyes - Fundadora',
      'story.crew.lila.copy':
        'Bióloga marina convertida en diseñadora de viajes, Lila creó Beyond the Reef para compartir arrecifes ocultos y comunidades isleñas con exploradores respetuosos.',
      'story.crew.makai.title': 'Makai Thompson - Arquitecto de Experiencias',
      'story.crew.makai.copy':
        'Criado entre tres islas, Makai teje rituales culturales, artesanos locales y sabores distintivos en cada itinerario.',
      'story.crew.sami.title': 'Sami Chen - Líder de Tecnología',
      'story.crew.sami.copy':
        'Sami desarrolló nuestra plataforma colaborativa con disponibilidad en tiempo real y mensajes de concierge que se sienten como chatear con un amigo.',
      'story.values.heading': 'Nuestros valores',
      'story.values.regen.title': 'Viajes regenerativos',
      'story.values.regen.copy':
        'Nos aliamos con proyectos comunitarios de conservación y destinamos parte de cada itinerario a la restauración de arrecifes.',
      'story.values.hospitality.title': 'Hospitalidad con corazón',
      'story.values.hospitality.copy':
        'Tus anfitriones te reciben como familia, preparando sorpresas significativas y detalles atentos durante todo el camino.',
      'story.values.tech.title': 'Tecnología que se difumina',
      'story.values.tech.copy':
        'Nuestras herramientas de planificación son potentes pero sencillas, para que te enfoques en la emoción y no en la logística.'
    },
    'tour-detail': {
      'page.title': 'Beyond the Reef Mexico | Detalles del Tour',
      'tour.hero.aria': 'Resumen del tour',
      'tour.hero.eyebrow': 'Aventuras favoritas de los viajeros',
      'tour.gallery.previous': 'Foto anterior',
      'tour.gallery.next': 'Siguiente foto',
      'tour.details.heading': 'Planea cada detalle con confianza',
      'tour.details.copy': 'Todo lo que necesitas saber antes de reservar.',
      'tour.details.about': 'Sobre esta experiencia',
      'tour.details.includes': 'Qué incluye',
      'tour.booking.label': 'Reserva ahora',
      'tour.booking.from': 'Desde',
      'tour.booking.currency': 'USD',
      'tour.booking.perPerson': 'por persona',
      'tour.booking.helper': 'Los precios bajan conforme agregas más personas.',
      'tour.booking.guestsLabel': '¿Cuántas personas?',
      'tour.booking.nameLabel': 'Nombre',
      'tour.booking.namePlaceholder': 'Tu nombre completo',
      'tour.booking.emailLabel': 'Correo electrónico',
      'tour.booking.emailPlaceholder': 'tu@correo.com',
      'tour.booking.phoneLabel': 'Número de teléfono',
      'tour.booking.phonePlaceholder': '+52 984 167 0697',
      'tour.booking.datetimeLabel': 'Fecha y hora de la actividad',
      'tour.booking.datetimeUnknown': 'Aún no lo sé',
      'tour.booking.pickupLabel': 'Lugar de pick-up',
      'tour.booking.pickupPlaceholder': 'Hotel o punto de encuentro',
      'tour.booking.submit': 'Reservar ahora',
      'tour.booking.note': 'No se realiza ningún pago aquí: confirmamos disponibilidad y te damos seguimiento de inmediato.',
      'tour.booking.disclaimer': 'Los precios y promociones pueden cambiar sin previo aviso.',
      'tour.booking.status.hold':
        'Reservando {{guests}} lugar(es) para {{tour}}. Confirmaremos el pick-up en {{pickup}} de inmediato.',
      'tour.booking.status.missingService':
        'Conecta el formulario de reserva con tu servicio de correo para recibir solicitudes.',
      'tour.booking.status.sent': '¡Solicitud enviada! Confirmaremos disponibilidad y te daremos seguimiento de inmediato.',
      'tour.booking.status.error': 'Ocurrió un error al enviar tu solicitud. Inténtalo de nuevo en unos minutos.',
      'tour.booking.status.unavailable': 'No pudimos enviar tu solicitud en este momento. Inténtalo de nuevo más tarde.',
      'tour.booking.pickupFallback': 'tu ubicación',
      'tour.booking.datetimeFallback': 'No proporcionado',
      'tour.related.aria': 'Otras aventuras',
      'tour.related.heading': 'Sigue explorando',
      'tour.related.copy': 'A otros viajeros también les encantaron estos recorridos.',
      'tour.related.previous': 'Tours anteriores',
      'tour.related.next': 'Siguientes tours'
    }
  }
};

const SUPPORTED_LANGUAGES = ['en', 'es'];
const DEFAULT_LANGUAGE = 'en';

function getTourContent(tour, lang = DEFAULT_LANGUAGE) {
  const translation = tour.translations?.[lang] || {};
  return {
    name: translation.name || tour.name,
    duration: translation.duration || tour.duration,
    tagline: translation.tagline || tour.tagline,
    description: translation.description || tour.description,
    includes: translation.includes || tour.includes,
    badge: translation.badge || tour.badge
  };
}

const adventureTours = [
  {
    slug: 'turtles-cenotes',
    name: 'Turtles + Cenotes',
    duration: 'Half a day • Ocean + Jungle',
    tagline: '· Sea Turtles<br>· 3 Cenotes<br>· Snack & Drinks',
    description:
      'Spend a dreamy morning in the water, starting with gentle sea turtle snorkeling and ending in three crystal-clear cenotes hidden in the jungle. Every stop feels like a postcard, with time to float, breathe, and soak it all in. It is a simple, feel-good adventure that still feels big and unforgettable.',
    includes: ['🐢 Swim with sea turtles', '🤿 Snorkel in 3 cenotes', '🥤 Snack & drinks'],
    image:
      'https://images.pexels.com/photos/847393/pexels-photo-847393.jpeg?_gl=1*1leu1xd*_ga*NTc3NjYyMTQzLjE3NjU4MTE2NzU.*_ga_8JE65Q40S6*czE3NjU5MDM2NjEkbzMkZzEkdDE3NjU5MDM2ODckajM0JGwwJGgw',
    gallery: [
      'https://images.pexels.com/photos/847393/pexels-photo-847393.jpeg?_gl=1*1leu1xd*_ga*NTc3NjYyMTQzLjE3NjU4MTE2NzU.*_ga_8JE65Q40S6*czE3NjU5MDM2NjEkbzMkZzEkdDE3NjU5MDM2ODckajM0JGwwJGgw',
      'https://images.pexels.com/photos/32865198/pexels-photo-32865198.jpeg?auto=format&fit=crop&w=1200&q=70',
      'https://images.pexels.com/photos/32865198/pexels-photo-32865198.jpeg?auto=format&fit=crop&w=1200&q=70&sat=-8'
    ],
    prices: {
      1: 340,
      2: 218,
      3: 207,
      4: 184,
      5: 162,
      6: 151,
      7: 140,
      8: 129,
      9: 124,
      10: 119,
      11: 119,
      12: 119
    },
    translations: {
      es: {
        name: 'Tortugas + Cenotes',
        duration: 'Medio día • Océano + selva',
        tagline: '· Tortugas marinas<br>· 3 cenotes<br>· Snack y bebidas',
        description:
          'Vive una mañana de agua y calma: comienza con snorkel junto a tortugas marinas y termina en tres cenotes cristalinos escondidos en la selva. Cada parada se siente como postal, con tiempo para flotar, respirar y disfrutar. Una aventura simple y memorable que se queda contigo.',
        includes: ['🐢 Nado con tortugas marinas', '🤿 Snorkel en 3 cenotes', '🥤 Snack y bebidas'],
        badge: 'Favorito'
      }
    },
    badge: 'Top pick'
  },
  {
    slug: 'tulum-turtles-cenotes',
    name: 'Tulum Underwater',
    duration: 'Full day • Culture + Water',
    tagline: '·Tulum Ruins<br>·Turtle Snorkeling<br>·2 Cenotes<br>·Full Local Lunch',
    description:
      'Walk the stunning cliffs of Tulum with a friendly guide, then slip into the water to snorkel with turtles before cooling off in two beautiful cenotes. The day flows smoothly with plenty of photo stops, easy pacing, and a full local lunch that tastes like the Yucatán. It is the kind of excursion that feels both magical and effortless.',
    includes: ['🏛️ Tulum ruins tour', '🐢 Turtle snorkeling', '🌊 Swim in 2 cenotes', '🌮 Full local lunch'],
    image:
      'https://images.pexels.com/photos/5992273/pexels-photo-5992273.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: [
      'https://images.pexels.com/photos/5992273/pexels-photo-5992273.jpeg?auto=format&fit=crop&w=1200&q=70',
      'https://images.pexels.com/photos/5992273/pexels-photo-5992273.jpeg?auto=format&fit=crop&w=1200&q=70&sat=-6'
    ],
    prices: {
      1: 390,
      2: 268,
      3: 257,
      4: 234,
      5: 212,
      6: 201,
      7: 190,
      8: 179,
      9: 174,
      10: 169,
      11: 169,
      12: 169
    },
    translations: {
      es: {
        name: 'Tulum Bajo el Agua',
        duration: 'Día completo • Cultura + agua',
        tagline: '· Ruinas de Tulum<br>· Snorkel con tortugas<br>· 2 cenotes<br>· Almuerzo local completo',
        description:
          'Recorre los impresionantes acantilados de Tulum con un guía cercano, luego sumérgete para hacer snorkel con tortugas y refrescarte en dos cenotes. El día fluye con paradas para fotos, ritmo relajado y un almuerzo local completo con sabor a Yucatán. Una excursión mágica y sin complicaciones.',
        includes: ['🏛️ Tour por ruinas de Tulum', '🐢 Snorkel con tortugas', '🌊 Nado en 2 cenotes', '🌮 Almuerzo local completo'],
        badge: 'Más vendido'
      }
    },
    badge: 'Best seller'
  },
  {
    slug: 'cenotes-express',
    name: 'Cenotes Express',
    duration: 'Half a day • Cenote circuit',
    tagline: '· 4 Cenotes<br>· Rappel down a cavern<br>· Snack & Beers',
    description:
      'Dive into four different cenotes, each one more gorgeous than the last, then rappel into a cavern chamber for a true wow moment. Between swims you will have time to recharge with a snack and a cold drink, so the day feels smooth and exciting. It is a compact adventure packed with amazing water moments.',
    includes: ['🌊 Visit 4 cenotes', '🧗 Rappel down a cavern', '🍺 Snack & beers'],
    image:
      'https://images.pexels.com/photos/2410870/pexels-photo-2410870.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/2410870/pexels-photo-2410870.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      1: 295,
      2: 173,
      3: 162,
      4: 140,
      5: 118,
      6: 107,
      7: 95,
      8: 84,
      9: 79,
      10: 74,
      11: 74,
      12: 74
    },
    translations: {
      es: {
        name: 'Cenotes Express',
        duration: 'Medio día • Circuito de cenotes',
        tagline: '· 4 cenotes<br>· Rappel en caverna<br>· Snack y cervezas',
        description:
          'Sumérgete en cuatro cenotes distintos, cada uno más impresionante que el anterior, y termina con un rappel a una caverna para el momento wow. Entre nados, tendrás tiempo para recargar con un snack y una bebida fría. Una aventura compacta con momentos acuáticos inolvidables.',
        includes: ['🌊 Visita 4 cenotes', '🧗 Rappel en caverna', '🍺 Snack y cervezas'],
        badge: 'Nueva ruta'
      }
    },
    badge: 'New route'
  },
  {
    slug: 'tulum-express',
    name: 'Tulum Express',
    duration: 'Half a day • Culture dip',
    tagline: '· Tulum Ruins<br>· Drinks & Beers<br>· (Optional) Free time in Tulum',
    description:
      'Explore the Tulum ruins with a certified guide who keeps the story easy to follow and fun to hear. You will have time for those iconic ocean views, great photos, and a relaxed walk through history. After the visit, enjoy optional free time for shopping, coffee, or a quick snack to round out a perfect half-day escape.',
    includes: ['🏛️ Tulum ruins entry', '🍹 Drinks & beers', '🛍️ Optional free time in Tulum'],
    image:
      'https://images.pexels.com/photos/13713189/pexels-photo-13713189.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/13713189/pexels-photo-13713189.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      1: 290,
      2: 168,
      3: 157,
      4: 135,
      5: 113,
      6: 102,
      7: 90,
      8: 79,
      9: 74,
      10: 69,
      11: 69,
      12: 69
    },
    translations: {
      es: {
        name: 'Tulum Express',
        duration: 'Medio día • Toque cultural',
        tagline: '· Ruinas de Tulum<br>· Bebidas y cervezas<br>· (Opcional) Tiempo libre en Tulum',
        description:
          'Explora las ruinas de Tulum con un guía certificado que explica todo de forma clara y entretenida. Tendrás tiempo para las vistas al mar, buenas fotos y un paseo relajado por la historia. Después, disfruta tiempo libre opcional para compras, café o un snack rápido.',
        includes: ['🏛️ Entrada a ruinas de Tulum', '🍹 Bebidas y cervezas', '🛍️ Tiempo libre en Tulum (opcional)'],
        badge: 'Escapada rápida'
      }
    },
    badge: 'Quick escape'
  },
  {
    slug: 'tacos-tour',
    name: 'Tacos Tour',
    duration: 'Evening • Flavor trail',
    tagline: '· Autentic Tacos<br>· Beers, Tequila & Mezcal<br>· Free time in Playa del Carmen',
    description:
      'Taste authentic tacos at beloved local spots, sip tequila or mezcal, and enjoy a lively night in Playa del Carmen with zero rush. Every stop is easy, flavorful, and full of local charm, with plenty of time to laugh and explore. It is a delicious evening that feels like the best kind of celebration.',
    includes: ['🌮 Authentic tacos', '🥃 Beers, tequila & mezcal', '🌆 Free time in Playa del Carmen'],
    image:
      'https://images.pexels.com/photos/4958641/pexels-photo-4958641.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/4958641/pexels-photo-4958641.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      1: 280,
      2: 158,
      3: 147,
      4: 125,
      5: 103,
      6: 92,
      7: 80,
      8: 69,
      9: 64,
      10: 59,
      11: 59,
      12: 59
    },
    translations: {
      es: {
        name: 'Tour de Tacos',
        duration: 'Noche • Ruta de sabor',
        tagline: '· Tacos auténticos<br>· Cervezas, tequila y mezcal<br>· Tiempo libre en Playa del Carmen',
        description:
          'Prueba tacos auténticos en lugares locales, acompaña con tequila o mezcal y disfruta una noche animada en Playa del Carmen sin prisas. Cada parada es fácil, sabrosa y con mucho encanto local, con tiempo para reír y explorar. Una noche deliciosa que se siente como celebración.',
        includes: ['🌮 Tacos auténticos', '🥃 Cervezas, tequila y mezcal', '🌆 Tiempo libre en Playa del Carmen'],
        badge: 'Favorito foodie'
      }
    },
    badge: 'Foodie fave'
  },
  {
    slug: 'tulum-coba',
    name: 'Tulum + Coba',
    duration: 'Full day • Ruins + Cenote',
    tagline: '·Tulum Ruins<br>·Coba Ruins<br>·Cenote with Zipline<br>·Local Buffet & Drinks',
    description:
      'Spend a full day visiting the Tulum and Coba ruins with guides who keep everything simple, clear, and engaging. You will cool off in a cenote with a zipline for extra thrills, then wrap up with a satisfying local buffet and drinks. It is an all-in-one excursion that feels epic yet easy.',
    includes: ['🏛️ Tulum ruins', '🌿 Coba ruins', '🪂 Cenote with zipline', '🥘 Local buffet & drinks'],
    image:
      'https://images.pexels.com/photos/17179205/pexels-photo-17179205.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/17179205/pexels-photo-17179205.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      1: 534,
      2: 300,
      3: 267,
      4: 256,
      5: 234,
      6: 212,
      7: 200,
      8: 189,
      9: 184,
      10: 179,
      11: 179,
      12: 179
    },
    translations: {
      es: {
        name: 'Tulum + Cobá',
        duration: 'Día completo • Ruinas + cenote',
        tagline: '· Ruinas de Tulum<br>· Ruinas de Cobá<br>· Cenote con tirolesa<br>· Buffet local y bebidas',
        description:
          'Vive un día completo entre las ruinas de Tulum y Cobá con guías que explican todo de forma clara y amena. Refresca en un cenote con tirolesa para un extra de adrenalina, y cierra con un buffet local y bebidas. Una excursión épica y sin complicaciones.',
        includes: ['🏛️ Ruinas de Tulum', '🌿 Ruinas de Cobá', '🪂 Cenote con tirolesa', '🥘 Buffet local y bebidas'],
        badge: 'Aventura de día completo'
      }
    },
    badge: 'All-day adventure'
  },
  {
    slug: 'coba',
    name: 'Coba',
    duration: 'Full day • Jungle history',
    tagline: '·Coba Ruins<br>·Bike around the site<br>·Cenote with Zipline<br>·Regional Buffet & Drinks',
    description:
      'Bike through the jungle ruins of Coba with a guide who brings the history to life in simple, fun ways. After exploring, you will cool off in a cenote with a zipline and enjoy a regional buffet with drinks. It is a big, beautiful day that still feels relaxed and approachable.',
    includes: ['🌿 Coba ruins', '🚲 Bike around the site', '🪂 Cenote with zipline', '🥘 Regional buffet & drinks'],
    image:
      'https://images.pexels.com/photos/14902028/pexels-photo-14902028.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/14902028/pexels-photo-14902028.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      1: 367,
      2: 234,
      3: 228,
      4: 189,
      5: 167,
      6: 156,
      7: 164,
      8: 134,
      9: 129,
      10: 124,
      11: 124,
      12: 124
    },
    translations: {
      es: {
        name: 'Cobá',
        duration: 'Día completo • Historia en la selva',
        tagline: '· Ruinas de Cobá<br>· Recorrido en bici<br>· Cenote con tirolesa<br>· Buffet regional y bebidas',
        description:
          'Recorre en bici las ruinas selváticas de Cobá con un guía que cuenta la historia de forma clara y entretenida. Después, refréscate en un cenote con tirolesa y disfruta un buffet regional con bebidas. Un día grande y hermoso que se siente relajado y accesible.',
        includes: ['🌿 Ruinas de Cobá', '🚲 Recorrido en bici', '🪂 Cenote con tirolesa', '🥘 Buffet regional y bebidas'],
        badge: 'Historia viva'
      }
    },
    badge: 'History rich'
  },
  {
    slug: 'chichen-itza',
    name: 'Chichen Itza',
    duration: 'Full day • Wonder of the World',
    tagline: '· Chichen Itza ruins<br>· Cenote with zipline<br>· Local Buffet with Drinks',
    description:
      'See Chichen Itza with a knowledgeable guide who shares the stories behind the temples in an easy, memorable way. Then take a refreshing swim in a cenote with a zipline before enjoying a regional buffet with drinks. It is a world-class excursion that feels smooth, exciting, and totally worth it.',
    includes: ['🗿 Chichen Itza ruins', '🪂 Cenote with zipline', '🥘 Local buffet with drinks'],
    image:
      'https://images.pexels.com/photos/3290068/pexels-photo-3290068.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/3290068/pexels-photo-3290068.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      2: 317,
      3: 317,
      4: 272,
      5: 239,
      6: 217,
      7: 205,
      8: 194,
      9: 189,
      10: 184,
      11: 184,
      12: 184
    },
    translations: {
      es: {
        name: 'Chichén Itzá',
        duration: 'Día completo • Maravilla del mundo',
        tagline: '· Ruinas de Chichén Itzá<br>· Cenote con tirolesa<br>· Buffet local con bebidas',
        description:
          'Visita Chichén Itzá con un guía experto que comparte las historias detrás de los templos de forma clara y memorable. Después, refréscate en un cenote con tirolesa y disfruta un buffet regional con bebidas. Una excursión de clase mundial, emocionante y totalmente vale la pena.',
        includes: ['🗿 Ruinas de Chichén Itzá', '🪂 Cenote con tirolesa', '🥘 Buffet local con bebidas'],
        badge: 'Sitio UNESCO'
      }
    },
    badge: 'UNESCO site'
  },
  {
    slug: 'coba-chichen-itza',
    name: 'Coba + Chichen Itza',
    duration: 'Full day • Two Wonders',
    tagline: '· Coba Ruins<br>· Chichen Itza ruins<br>· Cenote with zipline<br>· Local Buffet with Drinks',
    description:
      'Visit Coba deep in the jungle and Chichen Itza on the open plain in one incredible, well-paced day. Break up the adventure with a cenote zipline and a regional buffet with drinks that keeps everyone happy. It is a once-in-a-lifetime tour that feels effortless and fun.',
    includes: ['🌿 Coba ruins', '🗿 Chichen Itza ruins', '🪂 Cenote with zipline', '🥘 Local buffet with drinks'],
    image:
      'https://images.pexels.com/photos/31657162/pexels-photo-31657162.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/31657162/pexels-photo-31657162.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      2: 352,
      3: 352,
      4: 307,
      5: 274,
      6: 252,
      7: 240,
      8: 229,
      9: 224,
      10: 219,
      11: 219,
      12: 219
    },
    translations: {
      es: {
        name: 'Cobá + Chichén Itzá',
        duration: 'Día completo • Dos maravillas',
        tagline: '· Ruinas de Cobá<br>· Ruinas de Chichén Itzá<br>· Cenote con tirolesa<br>· Buffet local con bebidas',
        description:
          'Visita Cobá en plena selva y Chichén Itzá en la llanura abierta en un día increíble y bien organizado. Divide la aventura con una tirolesa en cenote y un buffet regional con bebidas que mantiene a todos felices. Un tour único en la vida, fácil y divertido.',
        includes: ['🌿 Ruinas de Cobá', '🗿 Ruinas de Chichén Itzá', '🪂 Cenote con tirolesa', '🥘 Buffet local con bebidas'],
        badge: 'Circuito épico'
      }
    },
    badge: 'Epic circuit'
  },
  {
    slug: 'holbox-express',
    name: 'Holbox Express',
    duration: 'Full day • Island hopping',
    tagline: '· Private SpeedBoat<br>· 3 Islands Hoping<br>· Golf Cart<br>· Free time on the island<br>· BeachClub Buffet with open bar',
    description:
      'Ride a private speedboat to hop between dreamy Holbox islands, relax on bright white sandbars, and enjoy time to explore at your own pace. The water is stunning, the vibe is laid-back, and the day feels like a tropical movie. A beach club buffet with open bar keeps everything easy and celebratory.',
    includes: ['🚤 Private speedboat', '🏝️ 3-island hopping', '🛺 Golf cart', '🏖️ Free time on the island', '🍹 Beach club buffet with open bar'],
    image:
      'https://images.pexels.com/photos/11481626/pexels-photo-11481626.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/11481626/pexels-photo-11481626.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      1: 740,
      2: 384,
      3: 329,
      4: 273,
      5: 229,
      6: 195,
      7: 173,
      8: 151,
      9: 146,
      10: 141,
      11: 141,
      12: 141
    },
    translations: {
      es: {
        name: 'Holbox Express',
        duration: 'Día completo • Paseo por islas',
        tagline:
          '· Lancha rápida privada<br>· Tour por 3 islas<br>· Carrito de golf<br>· Tiempo libre en la isla<br>· Buffet en beach club con barra libre',
        description:
          'Navega en lancha privada para recorrer las islas de Holbox, relájate en bancos de arena blanca y explora a tu ritmo. El agua es increíble, el ambiente es relajado y el día se siente de película tropical. Un buffet en beach club con barra libre lo hace todo fácil y festivo.',
        includes: ['🚤 Lancha rápida privada', '🏝️ Tour por 3 islas', '🛺 Carrito de golf', '🏖️ Tiempo libre en la isla', '🍹 Buffet en beach club con barra libre'],
        badge: 'Vida isleña'
      }
    },
    badge: 'Island life'
  },
  {
    slug: 'dolphin-turtle',
    name: 'Dolphin + Turtle',
    duration: 'Full day • UNESCO Biosphere',
    tagline: '· Sian Kaan by Speedboat<br>· Dolphin + Turtles<br>· Bird watching<br>· Reef Snorkeling<br>· Local Buffet',
    description:
      'Cruise through the Sian Ka’an reserve by speedboat to look for dolphins, turtles, and colorful reef life in a protected paradise. Slow down for peaceful bird watching, then snorkel the reef before ending with a beachside buffet. It is a breathtaking excursion that blends wildlife, water, and pure relaxation.',
    includes: ['🚤 Sian Ka’an by speedboat', '🐬 Dolphins & turtles', '🦜 Bird watching', '🤿 Reef snorkeling', '🍽️ Local buffet'],
    image:
      'https://images.pexels.com/photos/2922672/pexels-photo-2922672.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: ['https://images.pexels.com/photos/2922672/pexels-photo-2922672.jpeg?auto=format&fit=crop&w=1200&q=70'],
    prices: {
      1: 707,
      2: 376,
      3: 254,
      4: 210,
      5: 176,
      6: 198,
      7: 176,
      8: 165,
      9: 160,
      10: 155,
      11: 155,
      12: 155
    },
    translations: {
      es: {
        name: 'Delfines + Tortugas',
        duration: 'Día completo • Reserva UNESCO',
        tagline:
          '· Sian Ka’an en lancha rápida<br>· Delfines + tortugas<br>· Avistamiento de aves<br>· Snorkel en arrecife<br>· Buffet local',
        description:
          'Recorre la reserva de Sian Ka’an en lancha rápida para buscar delfines, tortugas y vida arrecifal en un paraíso protegido. Baja el ritmo con avistamiento de aves, luego haz snorkel en el arrecife y termina con un buffet a la orilla del mar. Una excursión increíble que mezcla fauna, agua y descanso.',
        includes: ['🚤 Sian Ka’an en lancha rápida', '🐬 Delfines y tortugas', '🦜 Avistamiento de aves', '🤿 Snorkel en arrecife', '🍽️ Buffet local'],
        badge: 'Reserva UNESCO'
      }
    },
    badge: 'UNESCO reserve'
  },
  {
    slug: 'fishing-half-day',
    name: 'Fishing Half Day',
    duration: 'Half a day • Private charter',
    tagline: '· Private Boat<br>· Fishing Equipment<br>· Fresh Ceviche and fish<br>· Drinks and Beers',
    description:
      'Enjoy a private fishing charter with pro guides, calm waters, and an easy pace along the coast. You will reel in the catch, then savor fresh ceviche, fish, and cold drinks right on board. It is a simple, amazing way to spend half a day on the Caribbean.',
    includes: ['🛥️ Private boat', '🎣 Fishing equipment', '🐟 Fresh ceviche & fish', '🍺 Drinks and beers'],
    image:
      'https://images.pexels.com/photos/3793366/pexels-photo-3793366.jpeg?auto=format&fit=crop&w=1200&q=70',
    gallery: [
      'https://images.pexels.com/photos/3793366/pexels-photo-3793366.jpeg?auto=format&fit=crop&w=1200&q=70',
      'https://images.pexels.com/photos/3793366/pexels-photo-3793366.jpeg?auto=format&fit=crop&w=1200&q=70&sat=-10'
    ],
    prices: {
      1: 0,
      2: 0,
      3: 0,
      4: 0,
      5: 0,
      6: 0,
      7: 0,
      8: 0,
      9: 0,
      10: 0,
      11: 0,
      12: 0
    },
    translations: {
      es: {
        name: 'Pesca medio día',
        duration: 'Medio día • Charter privado',
        tagline: '· Lancha privada<br>· Equipo de pesca<br>· Ceviche y pescado fresco<br>· Bebidas y cervezas',
        description:
          'Disfruta un charter privado de pesca con guías profesionales, aguas tranquilas y un ritmo relajado en la costa. Atrapa tu pesca y saborea ceviche fresco, pescado y bebidas frías a bordo. Una manera simple y espectacular de vivir medio día en el Caribe.',
        includes: ['🛥️ Lancha privada', '🎣 Equipo de pesca', '🐟 Ceviche y pescado fresco', '🍺 Bebidas y cervezas'],
        badge: 'Lancha privada'
      }
    },
    badge: 'Private boat'
  }
];

const currencyFormatter = new Intl.NumberFormat('en-US', {
  style: 'currency',
  currency: 'USD',
  maximumFractionDigits: 0
});

function interpolate(template, replacements = {}) {
  return template.replace(/\{\{(\w+)\}\}/g, (_, key) =>
    Object.prototype.hasOwnProperty.call(replacements, key) ? String(replacements[key]) : ''
  );
}

function createLanguageManager(pageKey) {
  const LANGUAGE_STORAGE_KEY = 'preferred-language';
  const storedLanguage = localStorage.getItem(LANGUAGE_STORAGE_KEY);
  const documentLanguage = document.documentElement.lang;
  let currentLanguage = SUPPORTED_LANGUAGES.includes(storedLanguage || '')
    ? storedLanguage
    : SUPPORTED_LANGUAGES.includes(documentLanguage)
    ? documentLanguage
    : 'en';
  const listeners = new Set();

  function getTranslationValue(lang, key) {
    const languageSet = translations[lang];
    if (!languageSet) return null;

    if (languageSet.global && Object.prototype.hasOwnProperty.call(languageSet.global, key)) {
      return languageSet.global[key];
    }

    if (pageKey && languageSet[pageKey] && Object.prototype.hasOwnProperty.call(languageSet[pageKey], key)) {
      return languageSet[pageKey][key];
    }

    return null;
  }

  function translateDocument(lang) {
    const languageSet = translations[lang];
    if (!languageSet) return;

    document.documentElement.lang = lang;

    const groups = [];
    if (languageSet.global) {
      groups.push(languageSet.global);
    }
    if (pageKey && languageSet[pageKey]) {
      groups.push(languageSet[pageKey]);
    }

    groups.forEach((group) => {
      Object.entries(group).forEach(([key, value]) => {
        const elements = document.querySelectorAll(`[data-i18n="${key}"]`);
        if (!elements.length) return;

        elements.forEach((element) => {
          const attr = element.dataset.i18nAttr;
          if (attr === 'html') {
            element.innerHTML = value;
          } else if (attr) {
            element.setAttribute(attr, value);
          } else {
            element.textContent = value;
          }
        });
      });
    });
  }

  function notify(lang) {
    listeners.forEach((callback) => {
      try {
        callback(lang);
      } catch (error) {
        console.error(error);
      }
    });
  }

  function applyLanguage(lang) {
    translateDocument(lang);
    notify(lang);
  }

  return {
    init() {
      applyLanguage(currentLanguage);
    },
    getLanguage() {
      return currentLanguage;
    },
    setLanguage(lang) {
      if (!SUPPORTED_LANGUAGES.includes(lang) || lang === currentLanguage) {
        return;
      }

      currentLanguage = lang;
      localStorage.setItem(LANGUAGE_STORAGE_KEY, lang);
      applyLanguage(lang);
    },
    onChange(callback) {
      if (typeof callback !== 'function') {
        return () => {};
      }

      listeners.add(callback);
      callback(currentLanguage);
      return () => listeners.delete(callback);
    },
    translate(key, replacements = {}, lang = currentLanguage) {
      const template = getTranslationValue(lang, key);
      if (typeof template !== 'string') {
        return '';
      }

      return interpolate(template, replacements);
    }
  };
}

(function () {
  const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)');

  document.addEventListener('DOMContentLoaded', () => {
    const pageKey = document.body?.dataset.page || 'home';
    const languageManager = createLanguageManager(pageKey);
    const isToursPage = pageKey === 'tours';

    setupNavigation();
    setupLanguageToggle(languageManager);
    setupThemeToggle(prefersDark, languageManager);
    window.addEventListener('resize', scheduleNavControlWidthSync, { passive: true });

    const refreshTourLists = () => {
      if (isToursPage) {
        buildToursHeroSlider(adventureTours, languageManager);
        buildToursCatalog(adventureTours, languageManager);
      }
      buildFavoritesCarousel(adventureTours, languageManager);
      setupCardCarousels();
      setupMediaPrefetch();
    };

    refreshTourLists();
    setupHeroSlider(languageManager);
    initTourPage(adventureTours, languageManager);
    setupMediaPrefetch();
    setupInquiryForm(languageManager);
    setCurrentYear();

    languageManager.init();
    languageManager.onChange(refreshTourLists);
    scheduleNavControlWidthSync();
  });
})();

function setupNavigation() {
  const navToggle = document.querySelector('[data-nav-toggle]');
  const navLinks = document.querySelector('.nav__links');

  if (!navToggle || !navLinks) return;

  navToggle.addEventListener('click', () => {
    const isOpen = navLinks.classList.toggle('open');
    navToggle.setAttribute('aria-expanded', String(isOpen));
  });

  navLinks.querySelectorAll('a').forEach((link) => {
    link.addEventListener('click', () => {
      if (navLinks.classList.contains('open')) {
        navLinks.classList.remove('open');
        navToggle.setAttribute('aria-expanded', 'false');
      }
    });
  });
}

let navControlWidthSyncScheduled = false;

function syncNavControlWidths() {
  navControlWidthSyncScheduled = false;
  const controls = Array.from(document.querySelectorAll('.language-toggle, .theme-toggle'));
  if (controls.length < 2) {
    return;
  }

  controls.forEach((control) => {
    control.style.removeProperty('--nav-control-width');
  });

  const maxWidth = controls.reduce((largest, control) => {
    const { width } = control.getBoundingClientRect();
    return width > largest ? width : largest;
  }, 0);

  if (!maxWidth) {
    return;
  }

  const widthValue = `${Math.ceil(maxWidth)}px`;
  controls.forEach((control) => {
    control.style.setProperty('--nav-control-width', widthValue);
  });
}

function scheduleNavControlWidthSync() {
  if (navControlWidthSyncScheduled) {
    return;
  }

  navControlWidthSyncScheduled = true;
  const scheduler =
    typeof window.requestAnimationFrame === 'function'
      ? window.requestAnimationFrame.bind(window)
      : (callback) => window.setTimeout(callback, 16);

  scheduler(() => {
    syncNavControlWidths();
  });
}

function setupLanguageToggle(languageManager) {
  const toggle = document.querySelector('[data-language-toggle]');
  if (!toggle) return;

  const updateToggle = (lang) => {
    const isSpanish = lang === 'es';
    const nextLanguage = isSpanish ? 'en' : 'es';
    toggle.textContent = nextLanguage === 'es' ? 'Español 🇲🇽' : 'English 🇺🇸';
    toggle.setAttribute('aria-pressed', isSpanish ? 'true' : 'false');
    scheduleNavControlWidthSync();
  };

  toggle.addEventListener('click', () => {
    const nextLanguage = languageManager.getLanguage() === 'en' ? 'es' : 'en';
    languageManager.setLanguage(nextLanguage);
  });

  languageManager.onChange(updateToggle);
}

function setupThemeToggle(prefersDark, languageManager) {
  const toggle = document.querySelector('[data-theme-toggle]');
  if (!toggle) return;

  const rootElement = document.documentElement;
  const getStoredTheme = () => {
    try {
      return localStorage.getItem('preferred-theme');
    } catch (error) {
      return null;
    }
  };

  const setStoredTheme = (value) => {
    try {
      localStorage.setItem('preferred-theme', value);
    } catch (error) {
      /* ignore storage errors */
    }
  };

  const applyTheme = (isDark) => {
    rootElement.classList.toggle('dark-mode', isDark);
    if (document.body) {
      document.body.classList.toggle('dark-mode', isDark);
    }
  };

  const storedTheme = getStoredTheme();
  const shouldUseDark = storedTheme === 'dark' || (!storedTheme && prefersDark?.matches);

  applyTheme(Boolean(shouldUseDark));
  toggle.setAttribute('aria-pressed', shouldUseDark ? 'true' : 'false');

  const updateLabel = (lang) => {
    const isDark = rootElement.classList.contains('dark-mode');
    const key = isDark ? 'themeToggle.light' : 'themeToggle.dark';
    toggle.textContent = languageManager.translate(key, {}, lang);
    scheduleNavControlWidthSync();
  };

  toggle.addEventListener('click', () => {
    const nextIsDark = !rootElement.classList.contains('dark-mode');
    applyTheme(nextIsDark);
    toggle.setAttribute('aria-pressed', nextIsDark ? 'true' : 'false');
    setStoredTheme(nextIsDark ? 'dark' : 'light');
    updateLabel(languageManager.getLanguage());
  });

  prefersDark?.addEventListener?.('change', (event) => {
    if (!getStoredTheme()) {
      applyTheme(event.matches);
      toggle.setAttribute('aria-pressed', event.matches ? 'true' : 'false');
      updateLabel(languageManager.getLanguage());
    }
  });

  languageManager.onChange(updateLabel);
}

function setupHeroSlider(languageManager) {
  const slider = document.querySelector('.hero-slider');
  if (!slider) return;

  const slides = Array.from(slider.querySelectorAll('.hero-slide'));
  const dotsContainer = slider.querySelector('.hero-slider__dots');
  const prevButton = slider.querySelector('[data-slide="prev"]');
  const nextButton = slider.querySelector('[data-slide="next"]');

  if (!slides.length) return;

  let currentIndex = slides.findIndex((slide) => slide.classList.contains('is-active'));
  if (currentIndex === -1) {
    slides[0].classList.add('is-active');
    currentIndex = 0;
  }

  const HAVE_CURRENT_DATA =
    typeof HTMLMediaElement !== 'undefined' ? HTMLMediaElement.HAVE_CURRENT_DATA : 2;
  let autoRotateTimer = null;
  const DEFAULT_ROTATE_INTERVAL = 7000;
  const hasMultipleSlides = slides.length > 1;

  const ensureMediaSource = (slide, index, eager = false) => {
    const media = slide.querySelector('.hero-slide__media');
    if (!media) return null;

    if (!media.src && media.dataset?.src && (eager || slide.classList.contains('is-active'))) {
      media.src = media.dataset.src;
    }

    if (media.tagName.toLowerCase() === 'video') {
      media.preload = eager ? 'auto' : 'metadata';
    }

    return media;
  };

  const handleMediaEnded = (index) => {
    if (!hasMultipleSlides) return;
    if (currentIndex !== index) return;
    nextSlide();
  };

  slides.forEach((slide, index) => {
    const media = ensureMediaSource(slide, index, index === currentIndex);
    if (!media) return;
    const isVideo = media.tagName.toLowerCase() === 'video';
    const endOffsetSeconds = Number(media.dataset?.endOffset ?? media.dataset?.endOffsetSeconds ?? 0);

    const markLoaded = () => {
      media.classList.add('is-loaded');
    };

    if (isVideo) {
      media.muted = true;
      media.setAttribute('muted', '');
      media.playsInline = true;
      media.setAttribute('playsinline', '');
      media.loop = false;
      media.preload = index === currentIndex ? 'auto' : 'metadata';

      if (media.readyState >= HAVE_CURRENT_DATA) {
        markLoaded();
      } else {
        ['loadeddata', 'canplay'].forEach((eventName) => {
          media.addEventListener(eventName, markLoaded, { once: true });
        });
      }

      media.addEventListener('loadedmetadata', () => {
        if (index === currentIndex) {
          scheduleAutoRotate();
        }
      });

      if (Number.isFinite(endOffsetSeconds) && endOffsetSeconds > 0) {
        const handleEarlyEnd = () => {
          const { duration, currentTime } = media;
          if (!Number.isFinite(duration)) return;

          const effectiveEnd = Math.max(0, duration - endOffsetSeconds);
          if (currentTime >= effectiveEnd) {
            media.pause();
            media.removeEventListener('timeupdate', handleEarlyEnd);
            handleMediaEnded(index);
          }
        };

        media.addEventListener('timeupdate', handleEarlyEnd);
      }

      media.addEventListener(
        'error',
        () => {
          slide.classList.add('hero-slide--unavailable');
        },
        { once: true }
      );

      media.addEventListener('ended', () => handleMediaEnded(index));
    } else {
      const handleError = () => {
        markLoaded();
        slide.classList.add('hero-slide--unavailable');
      };

      if (media.complete) {
        markLoaded();
      } else {
        media.addEventListener('load', markLoaded, { once: true });
        media.addEventListener('error', handleError, { once: true });
      }
    }
  });

  function setSlideState(slide, isActive, index) {
    slide.classList.toggle('is-active', isActive);
    slide.setAttribute('aria-hidden', isActive ? 'false' : 'true');

    const video = ensureMediaSource(slide, index, isActive);
    if (!video) return;

    if (isActive) {
      if (video.tagName.toLowerCase() === 'video') {
        video.muted = true;
        video.setAttribute('muted', '');
        video.playsInline = true;
        video.setAttribute('playsinline', '');
      }
      if (video.preload !== 'auto') {
        video.preload = 'auto';
      }
      if (video.readyState < HAVE_CURRENT_DATA && typeof video.load === 'function') {
        video.load();
      }
      if (typeof video.play === 'function') {
        const playPromise = video.play();
        if (playPromise && typeof playPromise.catch === 'function') {
          playPromise.catch(() => {});
        }
      }
    } else {
      if (video.preload !== 'metadata') {
        video.preload = 'metadata';
      }
      if (typeof video.pause === 'function') {
        video.pause();
      }
      if (!video.loop) {
        try {
          video.currentTime = 0;
        } catch (error) {
          // Some browsers might not allow resetting the currentTime for certain sources.
        }
      }
    }
  }

  function syncSlides() {
    slides.forEach((slide, index) => {
      setSlideState(slide, index === currentIndex, index);
    });
  }

  function goToSlide(index) {
    const nextIndex = (index + slides.length) % slides.length;
    if (nextIndex === currentIndex) return;

    const previousSlide = slides[currentIndex];
    const nextSlide = slides[nextIndex];

    setSlideState(previousSlide, false, currentIndex);
    currentIndex = nextIndex;
    setSlideState(nextSlide, true, currentIndex);
    updateDots();
    restartAutoRotate();
  }

  function nextSlide() {
    goToSlide(currentIndex + 1);
  }

  function previousSlide() {
    goToSlide(currentIndex - 1);
  }

  const scheduleAutoRotate = () => {
    if (!hasMultipleSlides) return;
    stopAutoRotate();

    const activeSlide = slides[currentIndex];
    const activeVideo = ensureMediaSource(activeSlide, currentIndex, true);
    const duration = activeVideo?.duration;
    const delay = Number.isFinite(duration) && duration > 0 ? duration * 1000 : DEFAULT_ROTATE_INTERVAL;

    autoRotateTimer = window.setTimeout(nextSlide, delay);
  };

  function startAutoRotate() {
    scheduleAutoRotate();
  }

  function stopAutoRotate() {
    if (autoRotateTimer) {
      window.clearTimeout(autoRotateTimer);
      autoRotateTimer = null;
    }
  }

  function restartAutoRotate() {
    scheduleAutoRotate();
  }

  function updateDotLabels(lang = languageManager.getLanguage()) {
    if (!dotsContainer) return;
    const dots = dotsContainer.querySelectorAll('.hero-slider__dot');
    dots.forEach((dot, index) => {
      dot.setAttribute('aria-label', languageManager.translate('heroSlider.goToSlide', { index: index + 1 }, lang));
    });
  }

  function buildDots() {
    if (!dotsContainer || !hasMultipleSlides) return;

    dotsContainer.innerHTML = '';
    slides.forEach((_, index) => {
      const dot = document.createElement('button');
      dot.className = 'hero-slider__dot';
      dot.type = 'button';
      dot.setAttribute('role', 'tab');
      dot.setAttribute('aria-label', languageManager.translate('heroSlider.goToSlide', { index: index + 1 }));
      dot.addEventListener('click', () => goToSlide(index));
      dotsContainer.append(dot);
    });

    updateDots();
  }

  function updateDots() {
    if (!dotsContainer || !hasMultipleSlides) return;
    const dots = dotsContainer.querySelectorAll('.hero-slider__dot');
    dots.forEach((dot, index) => {
      dot.setAttribute('aria-selected', index === currentIndex ? 'true' : 'false');
    });
    updateDotLabels();
  }

  syncSlides();

  prevButton?.addEventListener('click', previousSlide);
  nextButton?.addEventListener('click', nextSlide);

  if (hasMultipleSlides) {
    slider.addEventListener('mouseenter', stopAutoRotate);
    slider.addEventListener('mouseleave', startAutoRotate);
    slider.addEventListener('focusin', stopAutoRotate);
    slider.addEventListener('focusout', startAutoRotate);
  }

  buildDots();
  startAutoRotate();

  languageManager.onChange(updateDotLabels);
}

function buildToursHeroSlider(tours, languageManager) {
  const slider = document.querySelector('[data-tour-hero-slider]');
  const track = slider?.querySelector('[data-tour-hero-track]');
  if (!slider || !track || !tours.length) return;

  const lang = languageManager?.getLanguage() || DEFAULT_LANGUAGE;
  const updateSlide = (slide, tour) => {
    const content = getTourContent(tour, lang);
    const title = slide.querySelector('[data-tour-hero-title]');
    const cta = slide.querySelector('[data-tour-hero-cta]');
    const link = slide.querySelector('.hero-slide__link');
    const image = slide.querySelector('img');
    const viewLabel = languageManager?.translate('tour.card.viewAria', { name: content.name }, lang) || content.name;

    if (title) title.textContent = content.name;
    if (cta) cta.textContent = languageManager?.translate('tour.card.bookNow', {}, lang) || 'Book now';
    if (link) link.setAttribute('aria-label', viewLabel);
    if (image) image.alt = viewLabel;
  };

  if (!track.children.length) {
    tours.forEach((tour, index) => {
      const content = getTourContent(tour, lang);
      const slide = document.createElement('article');
      slide.className = `hero-slide${index === 0 ? ' is-active' : ''}`;
      slide.setAttribute('aria-hidden', index === 0 ? 'false' : 'true');
      slide.dataset.tourSlug = tour.slug;
      const viewLabel = languageManager?.translate('tour.card.viewAria', { name: content.name }, lang) || content.name;
      slide.innerHTML = `
        <a class="hero-slide__link" href="tour.html?tour=${tour.slug}" aria-label="${viewLabel}">
          <img class="hero-slide__media" src="${tour.image}" alt="${viewLabel}" loading="lazy" decoding="async" />
          <div class="hero-slide__overlay">
            <h2 data-tour-hero-title>${content.name}</h2>
            <span class="button button--primary hero-slide__cta" data-tour-hero-cta>${languageManager?.translate('tour.card.bookNow', {}, lang) || 'Book now'}</span>
          </div>
        </a>
      `;
      track.appendChild(slide);
    });
  } else {
    Array.from(track.children).forEach((slide) => {
      const slug = slide.dataset.tourSlug;
      const tour = tours.find((item) => item.slug === slug);
      if (tour) {
        updateSlide(slide, tour);
      }
    });
  }
}

function createFavoriteCard(tour, languageManager) {
  const halfDaySlugs = new Set(['tulum-express', 'cenotes-express', 'tacos-tour', 'turtles-cenotes']);
  const lang = languageManager?.getLanguage() || DEFAULT_LANGUAGE;
  const content = getTourContent(tour, lang);
  const durationKey = halfDaySlugs.has(tour.slug) ? 'tour.card.halfDay' : 'tour.card.fullDay';
  const durationLabel = languageManager?.translate(durationKey, {}, lang) || content.duration;
  const viewLabel = languageManager?.translate('tour.card.viewDetails', {}, lang) || 'View details';
  const ariaLabel = languageManager?.translate('tour.card.viewAria', { name: content.name }, lang) || content.name;
  const tagLabel = content.badge || content.tagline;
  const article = document.createElement('article');
  article.className = 'card favorite-card';
  article.setAttribute('role', 'listitem');
  article.innerHTML = `
    <a class="favorite-card__media" href="tour.html?tour=${tour.slug}" aria-label="${ariaLabel}">
      <img src="${tour.image}" alt="${content.name}" loading="lazy" decoding="async" />
      <span class="favorite-card__tag">${tagLabel}</span>
      <span class="favorite-card__badge">${durationLabel}</span>
    </a>
    <div class="favorite-card__body">
      <h3>${content.name}</h3>
      <p class="favorite-card__deal">${content.tagline}</p>
      <p class="favorite-card__copy">${content.description}</p>
      <a class="button button--primary favorite-card__cta" href="tour.html?tour=${tour.slug}">${viewLabel}</a>
    </div>
  `;
  return article;
}

function createTourGridCard(tour, languageManager) {
  const lang = languageManager?.getLanguage() || DEFAULT_LANGUAGE;
  const content = getTourContent(tour, lang);
  const badgeLabel = content.badge || languageManager?.translate('tour.card.privateBadge', {}, lang) || 'Private tour';
  const ctaLabel = languageManager?.translate('tour.card.bookNow', {}, lang) || 'Book now';
  const ariaLabel = languageManager?.translate('tour.card.viewAria', { name: content.name }, lang) || content.name;
  const article = document.createElement('article');
  article.className = 'card tour-grid-card';
  article.setAttribute('role', 'listitem');
  article.innerHTML = `
    <div class="tour-grid-card__media">
      <a href="tour.html?tour=${tour.slug}" aria-label="${ariaLabel}">
        <img src="${tour.image}" alt="${content.name}" loading="lazy" decoding="async" />
        <span class="tour-grid-card__badge">${badgeLabel}</span>
      </a>
    </div>
    <div class="tour-grid-card__body">
      <h3 class="tour-grid-card__title">${content.name}</h3>
      <p class="tour-grid-card__meta">${content.duration}</p>
      <p class="tour-grid-card__copy">${content.description}</p>
      <a class="button button--primary tour-grid-card__cta" href="tour.html?tour=${tour.slug}">${ctaLabel}</a>
    </div>
  `;
  return article;
}

function populateCardTrack(selector, tours, languageManager) {
  const track = document.querySelector(selector);
  if (!track) return null;
  track.innerHTML = '';
  tours.forEach((tour) => track.appendChild(createFavoriteCard(tour, languageManager)));
  return track;
}

function buildToursCatalog(tours, languageManager) {
  const grid = document.querySelector('[data-tour-grid]');
  if (!grid || !tours.length) return;

  grid.innerHTML = '';
  tours.forEach((tour) => grid.appendChild(createTourGridCard(tour, languageManager)));
}

function buildFavoritesCarousel(tours, languageManager) {
  const track = populateCardTrack('[data-favorites-track]', tours, languageManager);
  const viewport = track?.closest('.favorites-carousel')?.querySelector('.favorites-carousel__viewport');
  if (viewport) {
    viewport.scrollLeft = 0;
  }
}

function setupCardCarousels() {
  const carousels = document.querySelectorAll('[data-card-carousel]');
  if (!carousels.length) return;

  carousels.forEach((carousel) => {
    if (carousel.dataset.carouselReady === 'true') {
      if (typeof carousel._updateArrowState === 'function') {
        carousel._updateArrowState();
      }
      return;
    }

    const viewport = carousel.querySelector('.favorites-carousel__viewport');
    const track = carousel.querySelector('.favorites-carousel__track');
    const prevButton = carousel.querySelector('[data-carousel-arrow="prev"]');
    const nextButton = carousel.querySelector('[data-carousel-arrow="next"]');

    if (!viewport || !track) return;

    const getGap = () => {
      const styles = window.getComputedStyle(track);
      const gapValue = parseFloat(styles.columnGap || styles.gap || '0');
      return Number.isFinite(gapValue) ? gapValue : 0;
    };

    const updateArrowState = () => {
      const maxScroll = Math.max(0, viewport.scrollWidth - viewport.clientWidth);
      const atStart = viewport.scrollLeft <= 1;
      const atEnd = viewport.scrollLeft >= maxScroll - 1;

      if (prevButton) {
        prevButton.disabled = atStart;
      }
      if (nextButton) {
        nextButton.disabled = atEnd;
      }

      carousel.classList.toggle('favorites-carousel--is-scrollable', maxScroll > 1);
    };

    const scrollByDirection = (direction) => {
      const multiplier = direction < 0 ? -1 : 1;
      const card = track.querySelector('.favorite-card');
      const cardWidth = card ? card.getBoundingClientRect().width : viewport.clientWidth;
      const target = viewport.scrollLeft + multiplier * (cardWidth + getGap());
      const maxScroll = viewport.scrollWidth - viewport.clientWidth;
      const clamped = Math.max(0, Math.min(target, maxScroll));
      viewport.scrollTo({ left: clamped, behavior: 'smooth' });
    };

    prevButton?.addEventListener('click', () => scrollByDirection(-1));
    nextButton?.addEventListener('click', () => scrollByDirection(1));

    let scrollRaf = null;
    const handleScroll = () => {
      if (scrollRaf) return;
      scrollRaf = window.requestAnimationFrame(() => {
        scrollRaf = null;
        updateArrowState();
      });
    };

    viewport.addEventListener('scroll', handleScroll, { passive: true });

    let resizeRaf = null;
    const handleResize = () => {
      if (resizeRaf) return;
      resizeRaf = window.requestAnimationFrame(() => {
        resizeRaf = null;
        updateArrowState();
      });
    };

    window.addEventListener('resize', handleResize);

    updateArrowState();
    carousel.dataset.carouselReady = 'true';
    carousel._updateArrowState = updateArrowState;
  });
}

const mediaPreloadSources = new Set();
let mediaPreloadObserver = null;

function preloadImageSource(source) {
  if (!source || mediaPreloadSources.has(source)) return;
  const image = new Image();
  image.decoding = 'async';
  image.src = source;
  mediaPreloadSources.add(source);
}

function getMediaPreloadObserver() {
  if (mediaPreloadObserver || typeof IntersectionObserver === 'undefined') {
    return mediaPreloadObserver;
  }

  mediaPreloadObserver = new IntersectionObserver(
    (entries, observer) => {
      entries.forEach((entry) => {
        if (!entry.isIntersecting) return;
        const target = entry.target;
        observer.unobserve(target);

        if (target instanceof HTMLImageElement) {
          const source = target.currentSrc || target.src;
          preloadImageSource(source);
        }
      });
    },
    {
      rootMargin: '240px 0px',
      threshold: 0.01
    }
  );

  return mediaPreloadObserver;
}

function setupMediaPrefetch() {
  const lazyImages = document.querySelectorAll('img[loading="lazy"]:not([data-preload-ready])');
  if (!lazyImages.length) return;

  const observer = getMediaPreloadObserver();
  lazyImages.forEach((image) => {
    image.dataset.preloadReady = 'true';
    if (observer) {
      observer.observe(image);
    } else {
      preloadImageSource(image.currentSrc || image.src);
    }
  });
}

function setupTourGallery(gallery) {
  if (!gallery) return;

  const track = gallery.querySelector('[data-tour-gallery-track]');
  const prevButton = gallery.querySelector('[data-gallery-arrow="prev"]');
  const nextButton = gallery.querySelector('[data-gallery-arrow="next"]');
  const slides = track ? Array.from(track.children) : [];
  let current = 0;

  const update = () => {
    if (!track) return;
    track.style.transform = `translate3d(-${current * 100}%, 0, 0)`;
    const disableArrows = slides.length <= 1;
    if (prevButton) prevButton.disabled = disableArrows;
    if (nextButton) nextButton.disabled = disableArrows;
  };

  const goTo = (direction) => {
    if (!slides.length) return;
    current = (current + direction + slides.length) % slides.length;
    update();
  };

  prevButton?.addEventListener('click', () => goTo(-1));
  nextButton?.addEventListener('click', () => goTo(1));

  update();
}

function initTourPage(tours, languageManager) {
  const tourPage = document.querySelector('[data-tour-page]');
  if (!tourPage || !tours.length) return;

  const params = new URLSearchParams(window.location.search);
  const slug = params.get('tour');
  const baseTour = tours.find((item) => item.slug === slug) || tours[0];
  if (!baseTour) return;

  const galleryTrack = document.querySelector('[data-tour-gallery-track]');
  const galleryWrapper = document.querySelector('[data-tour-gallery]');
  const titleEl = document.querySelector('[data-tour-title]');
  const durationEl = document.querySelector('[data-tour-duration]');
  const taglineEl = document.querySelector('[data-tour-tagline]');
  const descriptionEl = document.querySelector('[data-tour-description]');
  const includesEl = document.querySelector('[data-tour-includes]');
  const priceEl = document.querySelector('[data-tour-price]');
  const guestSelect = document.querySelector('[data-tour-guests]');
  const bookingForm = document.querySelector('[data-tour-booking]');
  const noteEl = bookingForm?.querySelector('.tour-booking__note');
  const nameInput = document.querySelector('[data-tour-name]');
  const emailInput = document.querySelector('[data-tour-email]');
  const phoneInput = document.querySelector('[data-tour-phone]');
  const dateTimeInput = document.querySelector('[data-tour-datetime]');
  const dateTimeUnknown = document.querySelector('[data-tour-datetime-unknown]');
  const dateTimeField = document.querySelector('[data-tour-datetime-field]');
  const formspreeEndpoint = 'https://formspree.io/f/xkowoogr';

  const updateTourContent = (lang) => {
    const content = getTourContent(baseTour, lang);
    if (titleEl) titleEl.textContent = content.name;
    if (durationEl) durationEl.textContent = content.duration;
    if (taglineEl) taglineEl.innerHTML = content.tagline;
    if (descriptionEl) descriptionEl.textContent = content.description;
    document.title = `${content.name} | Beyond the Reef Mexico`;

    if (includesEl) {
      includesEl.innerHTML = '';
      content.includes.forEach((item) => {
        const cleanItem = item.replace(/^·\s*/, '');
        const li = document.createElement('li');
        li.textContent = cleanItem;
        includesEl.appendChild(li);
      });
    }

    if (galleryTrack) {
      const images = baseTour.gallery && baseTour.gallery.length ? baseTour.gallery : [baseTour.image];
      if (!galleryTrack.children.length) {
        galleryTrack.innerHTML = '';
        images.forEach((src, index) => {
          const slide = document.createElement('figure');
          slide.className = 'tour-gallery__slide';
          slide.innerHTML = `<img src="${src}" alt="${content.name} photo ${index + 1}" loading="lazy" decoding="async" />`;
          galleryTrack.appendChild(slide);
        });
      } else {
        Array.from(galleryTrack.querySelectorAll('img')).forEach((image, index) => {
          image.alt = `${content.name} photo ${index + 1}`;
        });
      }
    }

    const relatedTours = tours.filter((item) => item.slug !== baseTour.slug);
    populateCardTrack('[data-related-track]', relatedTours, languageManager);
    setupCardCarousels();
  };

  updateTourContent(languageManager?.getLanguage() || DEFAULT_LANGUAGE);

  setupTourGallery(galleryWrapper);

  const buildGuestOptions = () => {
    if (!guestSelect) return;
    if (!baseTour.prices) return;

    const counts = Object.keys(baseTour.prices)
      .map((value) => Number(value))
      .filter((value) => Number.isFinite(value))
      .sort((a, b) => a - b);

    if (!counts.length) return;

    guestSelect.innerHTML = '';
    counts.forEach((count) => {
      const option = document.createElement('option');
      option.value = String(count);
      option.textContent = String(count);
      guestSelect.appendChild(option);
    });

    const defaultCount = counts.includes(2) ? 2 : counts[0];
    guestSelect.value = String(defaultCount);
  };

  buildGuestOptions();

  const updatePrice = () => {
    if (!priceEl || !guestSelect) return;
    const guests = Number(guestSelect.value) || 1;
    const price = baseTour.prices ? baseTour.prices[guests] : baseTour.basePrice;
    priceEl.textContent = currencyFormatter.format(price || 0);
  };

  guestSelect?.addEventListener('change', updatePrice);
  updatePrice();

  const toggleDateTime = () => {
    if (!dateTimeInput || !dateTimeUnknown) return;
    const isUnknown = dateTimeUnknown.checked;
    dateTimeInput.disabled = isUnknown;
    if (isUnknown) {
      dateTimeInput.value = '';
    }
  };

  dateTimeUnknown?.addEventListener('change', toggleDateTime);
  toggleDateTime();

  const openDateTimePicker = () => {
    if (!dateTimeInput || dateTimeInput.disabled) return;
    if (typeof dateTimeInput.showPicker === 'function') {
      dateTimeInput.showPicker();
    }
  };

  dateTimeInput?.addEventListener('click', openDateTimePicker);
  dateTimeInput?.addEventListener('focus', openDateTimePicker);
  dateTimeField?.addEventListener('click', (event) => {
    if (event.target instanceof HTMLInputElement && event.target.type === 'checkbox') return;
    openDateTimePicker();
    dateTimeInput?.focus();
  });

  bookingForm?.addEventListener('submit', (event) => {
    event.preventDefault();
    const lang = languageManager?.getLanguage() || DEFAULT_LANGUAGE;
    const tourContent = getTourContent(baseTour, lang);
    const guests = Number(guestSelect?.value) || 1;
    const pickupFallback = languageManager?.translate('tour.booking.pickupFallback', {}, lang) || 'your location';
    const pickup = (document.querySelector('[data-tour-pickup]')?.value || pickupFallback).trim();
    const name = (nameInput?.value || '').trim();
    const email = (emailInput?.value || '').trim();
    const phone = (phoneInput?.value || '').trim();
    const dateTimeValue = (dateTimeInput?.value || '').trim();
    const dateTimeUnknownLabel =
      languageManager?.translate('tour.booking.datetimeUnknown', {}, lang) || 'Not sure yet';
    const dateTimeFallback =
      languageManager?.translate('tour.booking.datetimeFallback', {}, lang) || 'Not provided';
    const dateTimeLabel = dateTimeUnknown?.checked ? dateTimeUnknownLabel : dateTimeValue || dateTimeFallback;
    if (noteEl) {
      noteEl.textContent =
        languageManager?.translate('tour.booking.status.hold', { guests, tour: tourContent.name, pickup }, lang) ||
        `Holding ${guests} spot(s) for ${tourContent.name}. We will confirm pick-up at ${pickup} right away.`;
    }
    if (!formspreeEndpoint || formspreeEndpoint.includes('REPLACE_ME')) {
      if (noteEl) {
        noteEl.textContent =
          languageManager?.translate('tour.booking.status.missingService', {}, lang) ||
          'Please connect the booking form to your email service to receive requests.';
      }
      return;
    }
    const payload = {
      tour: tourContent.name,
      guests,
      name: name || dateTimeFallback,
      email: email || dateTimeFallback,
      phone: phone || dateTimeFallback,
      dateTime: dateTimeLabel,
      pickup
    };
    fetch(formspreeEndpoint, {
      method: 'POST',
      headers: {
        Accept: 'application/json',
        'Content-Type': 'application/json'
      },
      body: JSON.stringify(payload)
    })
      .then((response) => {
        if (!noteEl) return;
        noteEl.textContent = response.ok
          ? languageManager?.translate('tour.booking.status.sent', {}, lang) ||
            'Request sent! We will confirm availability and follow up right away.'
          : languageManager?.translate('tour.booking.status.error', {}, lang) ||
            'Something went wrong sending your request. Please try again shortly.';
      })
      .catch(() => {
        if (noteEl) {
          noteEl.textContent =
            languageManager?.translate('tour.booking.status.unavailable', {}, lang) ||
            'Unable to send your request right now. Please try again shortly.';
        }
      });
  });

  languageManager?.onChange(updateTourContent);
}

function setupInquiryForm(languageManager) {
  const form = document.querySelector('#custom-contact-form');
  const status = document.querySelector('#custom-contact-status');
  const formspreeEndpoint = 'https://formspree.io/f/xkowoogr';

  if (!form) return;

  const setStatus = (message = '', isError = false) => {
    if (!status) return;
    status.textContent = message;
    status.classList.toggle('is-error', Boolean(isError));
  };

  form.addEventListener('submit', (event) => {
    event.preventDefault();
    const formData = new FormData(form);
    const name = (formData.get('name') || '').toString().trim();
    const email = (formData.get('email') || '').toString().trim();
    const phone = (formData.get('phone') || '').toString().trim();
    const idea = (formData.get('idea') || '').toString().trim();

    if (!name || !email || !idea) {
      setStatus(languageManager.translate('inquiry.status.missing'), true);
      return;
    }

    if (!formspreeEndpoint || formspreeEndpoint.includes('REPLACE_ME')) {
      setStatus(languageManager.translate('inquiry.status.missingService'), true);
      return;
    }

    setStatus(languageManager.translate('inquiry.status.sending'));

    fetch(formspreeEndpoint, {
      method: 'POST',
      headers: {
        Accept: 'application/json'
      },
      body: formData
    })
      .then((response) => {
        if (response.ok) {
          setStatus(languageManager.translate('inquiry.status.sent'));
          form.reset();
          return;
        }
        setStatus(languageManager.translate('inquiry.status.error'), true);
      })
      .catch(() => {
        setStatus(languageManager.translate('inquiry.status.unavailable'), true);
      });
  });

  languageManager.onChange(() => setStatus(''));
}

function setCurrentYear() {
  const year = document.querySelector('#current-year');
  if (year) {
    year.textContent = new Date().getFullYear();
  }
}
